!function(c){var n={};function r(l){if(n[l])return n[l].exports;var t=n[l]={i:l,l:!1,exports:{}};return c[l].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=c,r.c=n,r.d=function(c,n,l){r.o(c,n)||Object.defineProperty(c,n,{enumerable:!0,get:l})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,n){if(1&n&&(c=r(c)),8&n)return c;if(4&n&&"object"==typeof c&&c&&c.__esModule)return c;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:c}),2&n&&"string"!=typeof c)for(var t in c)r.d(l,t,function(n){return c[n]}.bind(null,t));return l},r.n=function(c){var n=c&&c.__esModule?function(){return c.default}:function(){return c};return r.d(n,"a",n),n},r.o=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)},r.p="../../",r(r.s=1)}({0:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./game/js/modules/launchSound.js\n\r\n\r\nfunction launchSound(sound, isChangable, loop, isInitial) {\r\n  let source = "sounds/" + sound + ".mp3";\r\n\r\n  if (isChangable) {\r\n    $(\'#homeAudio\').attr(\'src\', source);\r\n    $(\'#homeAudio\').attr(\'loop\', loop);\r\n    document.getElementById(\'homeAudio\').play();\r\n  } else {\r\n    let myAudio = new Audio;\r\n    myAudio.src = source;\r\n    myAudio.loop = loop;\r\n    myAudio.play();\r\n\r\n    if (isInitial) {\r\n      myAudio.setAttribute(\'id\', \'homeAudio\');\r\n      $(".gameWindow").append(myAudio);\r\n    }\r\n  }\r\n}\r\n\r\nfunction pauseTheSound() {\r\n  document.getElementById(\'homeAudio\').pause();\r\n}\r\n\r\nfunction resumeTheSound() {\r\n    let play = document.getElementById(\'homeAudio\').play;\r\n    play.call(document.getElementById(\'homeAudio\'));\r\n}\r\n\r\nfunction changeVolume(number) {\r\n  document.getElementById(\'homeAudio\').volume *= number;\r\n  console.log(document.getElementById(\'homeAudio\').volume);\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/launchInitialWindow.js\n\r\n\r\nfunction launchInitialWindow() {\r\n\r\n  launchLoader();\r\n  launchSound("Caketown", false, true, true);\r\n}\r\n\r\n\r\nfunction   launchLoader() {\r\n  $(window).on(\'load\', function() {\r\n    let preloader = $(\'.loaderArea\');\r\n    let loader = preloader.find(\'.loader\');\r\n    loader.fadeOut();\r\n    preloader.delay(350).fadeOut(\'slow\');\r\n  });\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/User.js\nclass User {\r\n  constructor(name, surname, email) {\r\n    this.name = name;\r\n    this.surname = surname;\r\n    this.email = email;\r\n    this.score = 0;\r\n  }\r\n\r\n  get fullName() {\r\n    return `${this.name} ${this.surname}`;\r\n  }\r\n\r\n  set fullName(newValue) {\r\n    [this.name, this.surname] = newValue.split(\' \');\r\n  }\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/addUserDataToLocalStorage.js\n\r\n\r\n\r\n\r\nconst addUserDataToLocalStorage_usersStorage = localStorage.getItem("users");\r\nlet user;\r\n\r\nlet usersArray;\r\n\r\nfunction addUserDataToLocalStorage() {\r\n  user = new User($(\'#first-name\').val(), $(\'#last-name\').val(), $(\'#email\').val());\r\n  user.dataString = JSON.stringify(user);\r\n\r\n  // if users Storage is empty create localStorage\r\n  if (!addUserDataToLocalStorage_usersStorage) {\r\n    usersArray = [user.dataString];\r\n    localStorage.setItem("users", JSON.stringify(usersArray));\r\n\r\n    return;\r\n  }\r\n  addToStorage();\r\n\r\n}\r\n\r\nfunction addToStorage() {\r\n\r\n      // check whether user is already in localStorage\r\n      usersArray = JSON.parse(addUserDataToLocalStorage_usersStorage);\r\n      if (usersArray.includes(user.dataString)) {\r\n        return;\r\n      }\r\n\r\n      // and if not change localStorage data\r\n      usersArray.push(user.dataString);\r\n      localStorage.setItem("users", JSON.stringify(usersArray));\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/changeWindowFunctions.js\n\r\n\r\nfunction changeWindow(itemToHide, itemToShow, ...args) {\r\n  $(itemToHide).fadeOut(500, function() {\r\n    $(itemToShow).fadeIn(800);\r\n  });\r\n  if(args) {\r\n    args.forEach(item=> $(item).fadeOut(800));\r\n  }\r\n}\r\n\r\nfunction showWindow(...args ) {\r\n    args.forEach(item=> $(item).fadeIn(800))\r\n}\r\n\r\nfunction hideWindow(...args) {\r\n  args.forEach(item=> $(item).fadeOut(800))\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Character.js\nclass Character {\r\n\r\n  constructor(xCoordinate, yCoordinate, canvasWidth, canvasHeight) {\r\n\r\n    this.xCoordinate = xCoordinate;\r\n    this.yCoordinate = yCoordinate;\r\n    this.canvasWidth = canvasWidth;\r\n    this.canvasHeight = canvasHeight;\r\n  }\r\n\r\n  decreaseHealth(healthId, taskPoints) {\r\n\r\n    let doc = document;\r\n    let currentPoints = doc.getElementById(healthId).innerHTML;\r\n    let whoIsDead = \'nobody\';\r\n\r\n    if (currentPoints > taskPoints) {\r\n      doc.getElementById(healthId).innerHTML -= taskPoints;\r\n    } else {\r\n      doc.getElementById(healthId).innerHTML = 0;\r\n\r\n      if (healthId == \'playerHealth\') {\r\n        whoIsDead = \'player\';\r\n      } else {\r\n        doc.getElementById("playerScore").innerHTML = +doc.getElementById("playerScore").innerHTML + 1;\r\n        whoIsDead = \'monster\';\r\n      }\r\n    }\r\n    return whoIsDead;\r\n  }\r\n\r\n  resetHealth(healthId) {\r\n    document.getElementById(healthId).innerHTML = 100;\r\n  }\r\n  \r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Player.js\n\r\n\r\n\r\n\r\nclass Player_Player extends Character {\r\n  constructor(xCoordinate, yCoordinate, canvasWidth, canvasHeight, character, width, height, sprite, fullName){\r\n    super(xCoordinate, yCoordinate, canvasWidth, canvasHeight);\r\n    this.character = character;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.sprite = sprite;\r\n    this.fullName = fullName;\r\n\r\n  }\r\n  draw() {\r\n    let ctx = document.getElementById("canvas").getContext(\'2d\');\r\n\r\n    ctx.clearRect(this.xCoordinate, this.yCoordinate, this.width, this.height);\r\n\r\n    this.sprite.xCoordinate =\r\n        (this.sprite.xCoordinate === (this.sprite.width - this.width)\r\n         ? 0\r\n         : this.sprite.xCoordinate + this.width);\r\n\r\n    ctx.drawImage(this.sprite.src, this.sprite.xCoordinate, this.sprite.yCoordinate, this.width, this.height, this.xCoordinate, this.yCoordinate, this.width, this.height);\r\n  }\r\n\r\n  setName () {\r\n    $(\'#userName\').text(this.fullName);\r\n  }\r\n\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Sprite.js\nclass Sprite{\r\n  constructor(src, width, height, xCoordinate, yCoordinate, columns, rows) {\r\n    this.src = src;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.xCoordinate = xCoordinate;\r\n    this.yCoordinate = yCoordinate;\r\n    this.columns = columns;\r\n    this.rows = rows;\r\n  }\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/drawPlayer.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet player;\r\nlet tickCount = 0;\r\n\r\nfunction drawPlayer() {\r\n\r\n  let character = $(\'input[name=userChoice]:checked\', \'form\').val();\r\n  let sprite = new Image();\r\n\r\n  sprite.src = \'img/\' + character + \'SpriteIdle.png\';\r\n\r\n\r\n  sprite.addEventListener(\'load\', function() {\r\n    let spriteWidth = sprite.width;\r\n    let spriteHeight = sprite.height;\r\n\r\n    let numberOfColumnsInSprite = 10;\r\n    let numberOfRowsInSprite = 1;\r\n\r\n    let playerWidth = Math.floor(spriteWidth / numberOfColumnsInSprite);\r\n    let playerHeight = Math.floor(spriteHeight / numberOfRowsInSprite);\r\n\r\n    let playerCoordinateX = playerWidth / 2;\r\n    let playerCoordinateY = drawCanvas_canvasHeight - playerHeight;\r\n\r\n    let playerSprite = new Sprite(sprite, spriteWidth, spriteHeight, 0, 0, numberOfColumnsInSprite, numberOfRowsInSprite);\r\n\r\n    player = new Player_Player(playerCoordinateX, playerCoordinateY, 1400, drawCanvas_canvasHeight, character, playerWidth, playerHeight, playerSprite, user.fullName);\r\n    \r\n    player.resetHealth("playerHealth");\r\n    player.setName();\r\n    tick();\r\n\r\n\r\n  }, false);\r\n\r\n}\r\n\r\n\r\nfunction tick() {\r\n  if (tickCount > 15) {\r\n    player.draw();\r\n    tickCount = 0;\r\n  }\r\n\r\n  tickCount += 1;\r\n  requestAnimationFrame(tick);\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/generateRandomNumber.js\nfunction generateRandomNumber(min, max) {\r\n  let random = min + Math.random() * (max + 1 - min);\r\n  random = Math.floor(random);\r\n  return random;\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Monster.js\n\r\n\r\n\r\n\r\nclass Monster_Monster extends Character {\r\n\r\n  constructor(xCoordinate, yCoordinate, canvasWidth, canvasHeight){\r\n    super(xCoordinate, yCoordinate, canvasWidth, canvasHeight);\r\n  }\r\n\r\n  draw(arrayOfParts, drawingFunction) {\r\n    arrayOfParts.forEach( item => drawingFunction(item) );\r\n  }\r\n\r\n  setName(monsterNamesArray) {\r\n    let monsterName = monsterNamesArray.reduce(\r\n      (accumulator, current) =>\r\n      accumulator + \' \' + current[generateRandomNumber(1, (current.length-1))] , \'\'\r\n    );\r\n\r\n    $(\'#monsterName\').text(monsterName);\r\n  }\r\n\r\n  delete() {\r\n    let ctx = document.getElementById("canvas").getContext(\'2d\');\r\n    ctx.clearRect(this.canvasWidth-this.xCoordinate-5, this.canvasHeight-this.yCoordinate, 300, 300);\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//attack: function\r\n\n// CONCATENATED MODULE: ./game/js/classes/MonsterPart.js\n\r\n\r\n// import {canvasWidth, canvasHeight, ctx} from \'../modules/drawCanvas\';\r\n\r\n\r\nclass MonsterPart_MonsterPart extends Monster_Monster {\r\n  constructor(xCoordinate, yCoordinate, canvasWidth, canvasHeight, part, maxNumberOfParts, offset, ctx, drawCoordinateX, drawCoordinateY) {\r\n    super(xCoordinate, yCoordinate, canvasWidth, canvasHeight);\r\n    this.part = part;\r\n    this.offset = offset;\r\n    this.maxNumberOfParts = maxNumberOfParts;\r\n    this.numberOfParts = generateRandomNumber(1, maxNumberOfParts);\r\n    this.src = "img/monster parts/" + this.part + ".png";\r\n    this.ctx = ctx;\r\n    this.drawCoordinateX = drawCoordinateX || Math.floor(this.canvasWidth - xCoordinate);\r\n    this.drawCoordinateY = drawCoordinateY || Math.floor(this.canvasHeight - yCoordinate);\r\n  }\r\n\r\n\r\n  draw() {\r\n    let counter = 1;\r\n\r\n    while (this.numberOfParts >= counter) {\r\n      this.ctx.drawImage(this.image, this.drawCoordinateX, this.drawCoordinateY);\r\n\r\n      counter += 1;\r\n\r\n      if (this.offset === \'horizontal\') {\r\n        this.drawCoordinateX += 40;\r\n      } else {\r\n        this.drawCoordinateY += 40;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/drawMonster.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet monsterTypeArray = ["Ogre", "Dwarf", "Dragon", "Zombie", "Bastard", "Bugger", "Wizard", "Giant", "Elf", "Oni", "Demon", "Undead", "Pony", "Vampire", "Werewolf", "Succubus", "Humanoid", "Halfling", "Golem", "Gnoll", "Fairy", "Manticore", "Frankenstein", "Ex-wife"];\r\n\r\nlet monsterNameArray = ["John", "Will", "Donald", "Bill", "Arnold", "Tom", "Garry", "Ron", "Voldemort", "Jerry", "Anthony", "Eduard", "Eric", "Jeck", "Leo", "Brad", "Li", "Ryan", "Alex", "Dan", "Logan", "Henry", "Pitter", "Sam"];\r\n\r\nlet monsterNickArray = ["Hideous", "Wicked", "Dangerous", "Evil", "Fearsome", "Greedy", "Awful", "Dreadful", "Voracious", "Horrible", "Terrific", "Moody", "Sly", "Cunning", "Mighty", "Silly", "Dumpy", "Crazy", "Stupid", "Dense"];\r\n\r\nlet drawMonster_monsterNamesArray = [monsterTypeArray, monsterNickArray,  monsterNameArray];\r\n\r\nlet monster;\r\n\r\nfunction drawMonster() {\r\n\r\n      monster = new Monster_Monster(300, 200, drawCanvas_canvasWidth, drawCanvas_canvasHeight);\r\n      monster.setName(drawMonster_monsterNamesArray);\r\n      monster.resetHealth(\'monsterHealth\');\r\n\r\n      let arrayOfParts = [];\r\n\r\n      let body = new MonsterPart_MonsterPart(200, 200, drawCanvas_canvasWidth, drawCanvas_canvasHeight, "Body", 1, \'horizontal\', drawCanvas_ctx);\r\n      let foot = new MonsterPart_MonsterPart(200, 50, drawCanvas_canvasWidth, drawCanvas_canvasHeight, "Foot", 4, \'horizontal\', drawCanvas_ctx);\r\n      let rightHand = new MonsterPart_MonsterPart(100, 80, drawCanvas_canvasWidth, drawCanvas_canvasHeight, "RightHand", 2, \'horizontal\', drawCanvas_ctx);\r\n      let leftHand = new MonsterPart_MonsterPart(300, 190, drawCanvas_canvasWidth, drawCanvas_canvasHeight, "LeftHand1", 3, \'vertical\',  drawCanvas_ctx );\r\n\r\n      arrayOfParts.push(body, foot, rightHand, leftHand);\r\n\r\n      monster.draw(arrayOfParts, drawThePart);\r\n\r\n\r\n}\r\n\r\n//we can\'t set listener in constructor, it wouldn\'t work, so we need to set separate function\r\nfunction drawThePart(part) {\r\n  part.image = new Image();\r\n  part.image.src = part.src;\r\n  part.image.addEventListener(\'load\', function() {\r\n  part.draw();\r\n});\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/drawCanvas.js\n\r\n\r\n\r\n\r\n\r\nlet canvas;\r\nlet drawCanvas_ctx;\r\nlet drawCanvas_canvasWidth = 1000;\r\nlet drawCanvas_canvasHeight;\r\n\r\nfunction drawCanvas() {\r\n\r\n  canvas = document.getElementById("canvas");\r\n  if (canvas.getContext) {\r\n\r\n    drawCanvas_ctx = canvas.getContext("2d");\r\n\r\n    canvas.width = drawCanvas_canvasWidth = ($(window).width()) * 0.95;\r\n    canvas.height = drawCanvas_canvasHeight = ($(window).height()) * 0.5;\r\n\r\n    drawPlayer();\r\n    //   console.log(player);//mine\r\n    drawMonster(); //mine\r\n\r\n  } else {\r\n    console.log("браузер не поддерживает canvas");\r\n  };\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/startTheGame.js\n\r\n\r\n\r\n\r\n\r\nfunction startTheGame() {\r\n\r\n  addUserDataToLocalStorage();\r\n  changeWindow(".form-wrapper", ".gameWindow");\r\n  launchSound("BattleTheme", true, true);\r\n  drawCanvas();\r\n\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/showScore.js\n\r\n\r\n\r\n\r\n\r\nlet showScore_usersArray;\r\n\r\nfunction showScore() {\r\n\r\n  setUserScoreInLocaleStorage();\r\n  showScore_usersArray.sort(compareScore);\r\n  showScoreInTable(showScore_usersArray);\r\n  refreshLocaleStorage(showScore_usersArray);\r\n}\r\n\r\nfunction setUserScoreInLocaleStorage() {\r\n\r\n  const usersStorage = localStorage.getItem("users");\r\n  showScore_usersArray = JSON.parse(usersStorage);\r\n  let userIndex = showScore_usersArray.indexOf(user.dataString);\r\n  showScore_usersArray = showScore_usersArray.map(function(item) {\r\n    return JSON.parse(item);\r\n  });\r\n\r\n  showScore_usersArray[userIndex].score = parseInt($(\'#playerScore\').html());\r\n}\r\n//\r\nfunction showScoreInTable(array) {\r\n  let scoreTableLength = 1;\r\n  array.forEach(item => {\r\n    if (item.score && scoreTableLength <= 10 ) { //item.score &&\r\n      let li = document.createElement(\'li\');\r\n      li.innerHTML = scoreTableLength + \'. \' +  item.name + " " + item.surname + ": " + item.score + \' monster(s)\';\r\n      $(\'#scoreList\').append(li);\r\n      scoreTableLength += 1;\r\n    }\r\n  });\r\n  \r\n  showWindow(\'#resultsWindow\', \'#bgOpacity\');\r\n}\r\n\r\nfunction refreshLocaleStorage(array) {\r\n  showScore_usersArray = showScore_usersArray.map(function(item) {\r\n    return JSON.stringify(item);\r\n  });\r\n  localStorage.setItem("users", JSON.stringify(showScore_usersArray));\r\n}\r\n\r\nfunction compareScore(userA, userB) {\r\n  return userB.score - userA.score;\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Game.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Game_Game {\r\n\r\n  prestart() {\r\n    launchInitialWindow();\r\n  };\r\n  start() {\r\n    startTheGame();\r\n  }\r\n  newRound() {\r\n    setTimeout(launchSound, 2000, "Jingle", true, false);\r\n     setTimeout(monster.delete.bind(monster), 1500);\r\n     setTimeout(drawMonster, 3000);\r\n     setTimeout(launchSound, 3500, "BattleTheme", true, true);\r\n  }\r\n\r\n   finish (winner) {\r\n     winner == \'monster\' ?  setTimeout(launchSound, 2000, "monsterLaughter", true, false) : setTimeout(launchSound, 2000, "Jingle", true, false);\r\n     setTimeout(showScore, 2500);\r\n\r\n}\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Task.js\nclass Task {\r\n\r\n  constructor(points, func) {\r\n\r\n    this.points = points;\r\n    this.func = func;\r\n  }\r\n\r\n  insertTask (taskDescription) {\r\n    $(\'#taskDescription\').html(taskDescription);\r\n  }\r\n\r\n  addToArrayOfTasks (arrayOfTasks) {\r\n    arrayOfTasks.push(this);\r\n  }\r\n\r\n  setPattern (pattern) {\r\n    $(\'#answerInput\').attr(\'pattern\', pattern);\r\n  }\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/solveArithmeticProblem.js\n\r\n\r\n\r\n\r\n\r\nlet arithmeticTask = new Task(20, solveArithmeticProblem);\r\n\r\nfunction solveArithmeticProblem(obj) {\r\n\r\n  this.arrayOfOperators = [\'*\', \'/\', \'+\', \'-\'];\r\n  this.randomOperator = this.arrayOfOperators[generateRandomNumber(0, this.arrayOfOperators.length - 1)];\r\n\r\n  if (this.randomOperator === "-" || (this.randomOperator === "+")) {\r\n    this.randomlyGeneratedNumber = generateRandomNumber(-50, 50);\r\n    this.randomlyGeneratedNumber1 = generateRandomNumber(-20, 20);\r\n  } else {\r\n    this.randomlyGeneratedNumber = generateRandomNumber(-30, 30);\r\n    this.randomlyGeneratedNumber1 = generateRandomNumber(1, 10);\r\n  }\r\n\r\n\r\n  this.methods = {\r\n    \'-\': function(a, b) {\r\n      return a - b;\r\n    },\r\n    \'+\': function(a, b) {\r\n      return a + b;\r\n    },\r\n    \'/\': function(a, b) {\r\n      return a / b;\r\n    },\r\n    \'*\': function(a, b) {\r\n      return a * b;\r\n    },\r\n  };\r\n\r\n  this.answer = this.methods[this.randomOperator](this.randomlyGeneratedNumber, this.randomlyGeneratedNumber1);\r\n\r\n  //checking if answer is an integer\r\n  if ((this.answer ^ 0) !== this.answer) {\r\n\r\n    this.answer = this.answer.toFixed(1);\r\n  }\r\n\r\n\r\n  this.insertTask(\r\n    `<p>Enter an answer without whitespaces.</p>\r\n    <p> If the answer is not an integer, write it through the dot with 1 character after this</p>\r\n    <p> ${this.randomlyGeneratedNumber}  ${this.randomOperator} ${this.randomlyGeneratedNumber1} =  </p>`);\r\n\r\n  this.setPattern("-?[0-9]{1,4}\\.?[0-9]?");\r\n\r\n  this.answer += \'\';\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/DictionaryTask.js\n\r\n\r\n\r\n\r\nclass DictionaryTask_DictionaryTask extends Task {\r\n\r\n  constructor(points, func) {\r\n    super(points, func);\r\n  }\r\n\r\n  static downloadDictionary() {\r\n\r\n    return fetch("database/dict.json")\r\n\r\n      .then(function(response) {\r\n        return response.json();\r\n      })\r\n  }\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/translationTask.js\n\r\n\r\n\r\n\r\n\r\nlet translationTask = new DictionaryTask_DictionaryTask(30, launchTranslationTask);\r\n\r\nfunction launchTranslationTask(obj) {\r\n\r\n      DictionaryTask_DictionaryTask.downloadDictionary()\r\n\r\n    .then(function(dictionaryArray) {\r\n\r\n      translationTask.randomNumber = generateRandomNumber(0, dictionaryArray.length-1);\r\n\r\n      translationTask.answer = dictionaryArray[translationTask.randomNumber][2];\r\n\r\n      translationTask.question = dictionaryArray[translationTask.randomNumber][0];\r\n\r\n      translationTask.insertTask(`Translate from English to Russian: ${translationTask.question}`);\r\n\r\n      translationTask.setPattern("[А-Яа-я]{2,}");\r\n\r\n      });\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/sortTask.js\n\r\n\r\n\r\n\r\n\r\nlet sortTask = new DictionaryTask_DictionaryTask(15, launchSortTask);\r\n\r\nfunction launchSortTask(obj) {\r\n\r\n  DictionaryTask_DictionaryTask.downloadDictionary()\r\n\r\n    .then(function(dictionaryArray) {\r\n\r\n      sortTask.randomNumber = generateRandomNumber(0, dictionaryArray.length - 1); //todo in class?\r\n      sortTask.answer = dictionaryArray[sortTask.randomNumber][0];\r\n      sortTask.insertTask(`<p>Make up a word or write it down</p><ul id="sort" class=\'sortable\'></ul>`);\r\n      sortTask.setPattern("[A-Za-z]{2,}");\r\n\r\n      let wordArray = sortTask.answer.split("");\r\n      wordArray.sort(function() {\r\n        return .5 - Math.random();\r\n      });\r\n\r\n      wordArray.forEach(item => {\r\n        let li = document.createElement(\'li\');\r\n        li.setAttribute(\'id\', item);\r\n        li.innerHTML = item;\r\n        $(\'#sort\').append(li);\r\n\r\n      })\r\n\r\n      $("#sort").sortable({\r\n        update: function(event, ui) {\r\n          //check if correct\r\n          let sortedIDs = $("#sort").sortable("toArray").join("");\r\n\r\n          if (sortedIDs == sortTask.answer) {\r\n            sortTask.isAnswerRight = true;\r\n            $(\'#SubmitTheAnswer\').submit();\r\n\r\n          }\r\n        }\r\n      });\r\n    });\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/listeningTask.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet listeningTask = new DictionaryTask_DictionaryTask(15, launchListeningTask);\r\n\r\nfunction launchListeningTask(obj) {\r\n\r\n  DictionaryTask_DictionaryTask.downloadDictionary()\r\n\r\n    .then(function(dictionaryArray) {\r\n\r\n      listeningTask.randomNumber = generateRandomNumber(0, dictionaryArray.length - 1); //todo in class?\r\n\r\n      listeningTask.answer = dictionaryArray[listeningTask.randomNumber][0];\r\n\r\n      listeningTask.question = dictionaryArray[listeningTask.randomNumber][0];\r\n\r\n      listeningTask.insertTask(`<p>Write the word in English</p>\r\n        <button id=\'spellingButton\'>Push to launch audio</button> `);\r\n\r\n      listeningTask.setPattern("[A-Za-z]{2,}");\r\n\r\n      $(\'#spellingButton\').click(function() {\r\n        pauseTheSound();\r\n        let synth = window.speechSynthesis;\r\n        let utterThis = new SpeechSynthesisUtterance(listeningTask.answer);\r\n        utterThis.lang = \'en-US\';\r\n        synth.speak(utterThis);\r\n        setTimeout(resumeTheSound, 2000);\r\n      })\r\n\r\n    });\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/primePowerTask.js\n\r\n\r\n\r\n\r\n\r\nlet primePowerTask = new Task(10, launchPrimePowerTask);\r\n\r\nfunction launchPrimePowerTask(obj) {\r\n\r\n  this.answer = generateRandomNumber(2, 8) + "";\r\n  this.randomlyGeneratedNumber = generateRandomNumber(1, 100) + "";\r\n  this.taskDescriptionString = ` + ${this.randomlyGeneratedNumber}`.repeat(this.answer - 1);\r\n  this.insertTask(\r\n    `<p>What is the prime power of the number</p>\r\n    <p> ${this.randomlyGeneratedNumber}  ${this.taskDescriptionString} </p>`\r\n  );\r\n\r\n  this.setPattern("[0-9]{1}");\r\n  this.answer += \'\';\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/classes/Spell.js\n\r\n\r\n\r\n\r\nclass Spell_Spell extends Character {\r\n\r\n  constructor(xCoordinate, yCoordinate, canvasWidth, canvasHeight, image, width, height, borderCoordinateX, direction) {\r\n    super(xCoordinate, yCoordinate, canvasWidth, canvasHeight)\r\n    this.image = image;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.borderCoordinateX = borderCoordinateX;\r\n    this.direction = direction;\r\n  }\r\n\r\n  draw() {\r\n    let ctx = document.getElementById("canvas").getContext(\'2d\');\r\n    ctx.clearRect(this.xCoordinate, this.yCoordinate, this.width, this.height);\r\n    this.xCoordinate += this.direction;\r\n    ctx.drawImage(this.image, this.xCoordinate, this.yCoordinate);\r\n\r\n  }\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/launchSpellAnimation.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet spell;\r\n\r\nfunction launchSpellAnimation(target) {\r\n  let spellImage = new Image();\r\n\r\n  let spellCoordinateY = player.yCoordinate + player.height / 2;\r\n\r\n  spellImage.src = \'img/blades.png\';\r\n\r\n  spellImage.addEventListener(\'load\', function() {\r\n\r\n    let spellWidth = spellImage.width;\r\n    let spellHeight = spellImage.height;\r\n\r\n    let spellCoordinateX;;\r\n    let spellBorderCoordinateX;\r\n    let spellAnimationDirection;\r\n\r\n    if (target === \'monster\') {\r\n\r\n      spellCoordinateX = player.xCoordinate + player.width / 2;\r\n      spellBorderCoordinateX = player.canvasWidth - 430 - spellWidth;\r\n      spellAnimationDirection = 10;\r\n\r\n    } else {\r\n      spellCoordinateX = player.canvasWidth - 450 - spellWidth;\r\n      spellBorderCoordinateX = player.xCoordinate + player.width / 2;\r\n      spellAnimationDirection = -10;\r\n    }\r\n\r\n    spell = new Spell_Spell(spellCoordinateX, spellCoordinateY, player.canvasWidth, player.canvasHeight, spellImage, spellWidth, spellHeight, spellBorderCoordinateX, spellAnimationDirection);\r\n\r\n    animateSpell();\r\n\r\n  });\r\n\r\n}\r\n\r\nfunction animateSpell() {\r\n  spell.draw();\r\n  spell.requestAnimationSpellId = requestAnimationFrame(animateSpell);\r\n  checkBorder();\r\n}\r\n\r\n\r\nfunction checkBorder() {\r\n  if (spell.direction > 0) {\r\n    if (spell.xCoordinate > spell.borderCoordinateX) {\r\n\r\n      cancelAnimation() ;\r\n    }\r\n  }\r\n  else {\r\n    if (spell.xCoordinate < spell.borderCoordinateX) {\r\n\r\n      cancelAnimation() ;\r\n    }\r\n  }\r\n}\r\n\r\nfunction cancelAnimation() {\r\n\r\n  cancelAnimationFrame(spell.requestAnimationSpellId);\r\n  drawCanvas_ctx.clearRect(spell.xCoordinate, spell.yCoordinate, spell.width, spell.height);\r\n\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/modules/launchTask.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet arrayOfTasks = [arithmeticTask, translationTask, sortTask, listeningTask, primePowerTask];\r\n\r\nlet task;\r\n\r\nfunction launchTask(taskNumber) {\r\n  //implement task function\r\n  task = arrayOfTasks[taskNumber];\r\n\r\n  arrayOfTasks[taskNumber].func(this);\r\n\r\n}\r\n\r\nfunction checkAnswer(taskNumber) {\r\n  let correctAnswer = arrayOfTasks[taskNumber].answer;\r\n  //answer\r\n  let isRight;\r\n  let whoIsDead;\r\n\r\n\r\n\r\n  let userAnswer = $(\'form [name="user-answer"]\').val();\r\n  let arrayOfAnswers = correctAnswer.split(", ");\r\n  arrayOfAnswers = arrayOfAnswers.map(item => new RegExp(item, \'i\'));\r\n\r\n  arrayOfAnswers.forEach(item => {\r\n    if (item.test(userAnswer)) {\r\n      isRight = true;\r\n    }\r\n  });\r\n\r\n  if (isRight || arrayOfTasks[taskNumber].isAnswerRight) { //for sortable check\r\n\r\n  //  alert(\'yep\');\r\n    launchSpellAnimation(\'monster\');\r\n\r\n    whoIsDead = monster.decreaseHealth("monsterHealth", task.points);\r\n\r\n  } else {\r\n  //  alert(\'nope\');\r\n    launchSpellAnimation(\'player\');\r\n    whoIsDead = player.decreaseHealth("playerHealth", task.points);\r\n  }\r\n\r\n  setTimeout(launchSound, 600, "Blast", false, false);\r\n\r\n  return whoIsDead;\r\n}\r\n\n// CONCATENATED MODULE: ./game/js/main1.js\n\r\n\r\n\r\n\r\n\r\n\r\n$(document).ready(function() {\r\n\r\n  let game = new Game_Game();\r\n  game.prestart();\r\n\r\n  $("#userDataForm").submit(function(event) {\r\n\r\n    event.preventDefault();\r\n    game.start();\r\n\r\n  });\r\n\r\n  $("#spellsChoosingButton").click(function() {\r\n    showWindow("#bgOpacity", "#modalWindow");\r\n  });\r\n\r\n  let taskNumber\r\n\r\n  $(\'#spellsList\').click(function(event) {\r\n\r\n    if ($(event.target).attr(\'id\') == \'close\') {\r\n      hideWindow(\'#modalWindow\', \'#bgOpacity\');\r\n    } else {\r\n      changeWindow(\'#modalWindowWrapper\', \'#taskWrapper\');\r\n      taskNumber = $(event.target).attr(\'id\') - 1;\r\n      launchTask(taskNumber);\r\n\r\n    }\r\n  });\r\n\r\n  $(\'#userAnswer\').submit(function(e) {\r\n    e.preventDefault();\r\n    let whoIsDead = checkAnswer(taskNumber);\r\n\r\n    if (whoIsDead == \'player\') {\r\n      //alert(\'Dead\');\r\n      setTimeout(game.finish(\'monster\'), 2000);\r\n    } else if (whoIsDead == \'monster\') {\r\n    //  alert("new Round");\r\n      setTimeout(game.newRound(), 2000);\r\n    }\r\n    changeWindow(\'#modalWindow\', \'#modalWindowWrapper\', \'#bgOpacity\');\r\n\r\n  });\r\n\r\n  $(\'#menu\').click(function() {\r\n    showWindow(\'#menuWindow\', \'#bgOpacity\');\r\n  });\r\n\r\n  $(\'#menuContent\').click(function(e) {\r\n    switch ($(e.target).attr(\'id\')) {\r\n      case \'startNewGame\':\r\n        hideWindow(\'#menuWindow\', \'#bgOpacity\');\r\n        game.start();\r\n        break;\r\n      case "finishGame":\r\n        hideWindow(\'#menuWindow\', \'#bgOpacity\');\r\n        game.finish(\'player\');\r\n        break;\r\n      case \'closeMenu\':\r\n        hideWindow(\'#menuWindow\', \'#bgOpacity\');\r\n        break;\r\n    }\r\n\r\n  });\r\n\r\n  $("#resultsContent").click(function(e) {\r\n    if ($(e.target).attr(\'id\') == \'startNewGame\') {\r\n      hideWindow(\'#resultsWindow\', \'#bgOpacity\');\r\n      game.start();\r\n    } else if ($(e.target).attr(\'id\') == \'exit\') {\r\n      let myWindow = window.open("", "_self");\r\n      myWindow.document.write("");\r\n      setTimeout(function() {\r\n        myWindow.close();\r\n      }, 1000);\r\n\r\n    }\r\n  });\r\n\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvbGF1bmNoU291bmQuanM/NTg2YSIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvbGF1bmNoSW5pdGlhbFdpbmRvdy5qcz9jZjhkIiwid2VicGFjazovLy8uL2dhbWUvanMvY2xhc3Nlcy9Vc2VyLmpzP2FjYTEiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL2FkZFVzZXJEYXRhVG9Mb2NhbFN0b3JhZ2UuanM/ZmYxOSIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvY2hhbmdlV2luZG93RnVuY3Rpb25zLmpzPzBiYWYiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9jbGFzc2VzL0NoYXJhY3Rlci5qcz9hMjUxIiwid2VicGFjazovLy8uL2dhbWUvanMvY2xhc3Nlcy9QbGF5ZXIuanM/YWNhZiIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL2NsYXNzZXMvU3ByaXRlLmpzPzMzNmIiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL2RyYXdQbGF5ZXIuanM/NjQ0ZCIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvZ2VuZXJhdGVSYW5kb21OdW1iZXIuanM/OGI1NiIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL2NsYXNzZXMvTW9uc3Rlci5qcz82MWFjIiwid2VicGFjazovLy8uL2dhbWUvanMvY2xhc3Nlcy9Nb25zdGVyUGFydC5qcz9jMzk4Iiwid2VicGFjazovLy8uL2dhbWUvanMvbW9kdWxlcy9kcmF3TW9uc3Rlci5qcz9hYTQyIiwid2VicGFjazovLy8uL2dhbWUvanMvbW9kdWxlcy9kcmF3Q2FudmFzLmpzPzU1YTkiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL3N0YXJ0VGhlR2FtZS5qcz8yZmQ3Iiwid2VicGFjazovLy8uL2dhbWUvanMvbW9kdWxlcy9zaG93U2NvcmUuanM/Y2NmYyIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL2NsYXNzZXMvR2FtZS5qcz9jNGUwIiwid2VicGFjazovLy8uL2dhbWUvanMvY2xhc3Nlcy9UYXNrLmpzPzBiYjIiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL3NvbHZlQXJpdGhtZXRpY1Byb2JsZW0uanM/NzUxZSIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL2NsYXNzZXMvRGljdGlvbmFyeVRhc2suanM/ZjhjZCIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvdHJhbnNsYXRpb25UYXNrLmpzP2JmODQiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL3NvcnRUYXNrLmpzPzU1NTUiLCJ3ZWJwYWNrOi8vLy4vZ2FtZS9qcy9tb2R1bGVzL2xpc3RlbmluZ1Rhc2suanM/OGU3ZiIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvcHJpbWVQb3dlclRhc2suanM/MmVhMiIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL2NsYXNzZXMvU3BlbGwuanM/ZDNiYyIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvbGF1bmNoU3BlbGxBbmltYXRpb24uanM/ZWJiYiIsIndlYnBhY2s6Ly8vLi9nYW1lL2pzL21vZHVsZXMvbGF1bmNoVGFzay5qcz9iNGExIiwid2VicGFjazovLy8uL2dhbWUvanMvbWFpbjEuanM/ZWNkMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBUTs7QUFFUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQ2xDb0I7O0FBRXBCOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLFVBQVUsR0FBRyxhQUFhO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7O0FDaEJBOztBQUVROztBQUVSO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuQ1E7O0FBRVI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQ2pCQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7O0FDbkNBOztBQUVROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZlO0FBQ2Y7QUFDMEI7QUFDYjs7QUFFTDs7O0FBR1I7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQSxHQUFHOztBQUVIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0pBO0FBQ0E7QUFDUTs7QUFFUjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFD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O0FBQ0E7OztBQzlEQTtBQUNnQztBQUNhO0FBQ3hCOzs7QUFHckI7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsR0FBRzs7QUFFSCxDQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge2xhdW5jaFNvdW5kLCBwYXVzZVRoZVNvdW5kLCByZXN1bWVUaGVTb3VuZCwgY2hhbmdlVm9sdW1lfTtcclxuXHJcbmZ1bmN0aW9uIGxhdW5jaFNvdW5kKHNvdW5kLCBpc0NoYW5nYWJsZSwgbG9vcCwgaXNJbml0aWFsKSB7XHJcbiAgbGV0IHNvdXJjZSA9IFwic291bmRzL1wiICsgc291bmQgKyBcIi5tcDNcIjtcclxuXHJcbiAgaWYgKGlzQ2hhbmdhYmxlKSB7XHJcbiAgICAkKCcjaG9tZUF1ZGlvJykuYXR0cignc3JjJywgc291cmNlKTtcclxuICAgICQoJyNob21lQXVkaW8nKS5hdHRyKCdsb29wJywgbG9vcCk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUF1ZGlvJykucGxheSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsZXQgbXlBdWRpbyA9IG5ldyBBdWRpbztcclxuICAgIG15QXVkaW8uc3JjID0gc291cmNlO1xyXG4gICAgbXlBdWRpby5sb29wID0gbG9vcDtcclxuICAgIG15QXVkaW8ucGxheSgpO1xyXG5cclxuICAgIGlmIChpc0luaXRpYWwpIHtcclxuICAgICAgbXlBdWRpby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hvbWVBdWRpbycpO1xyXG4gICAgICAkKFwiLmdhbWVXaW5kb3dcIikuYXBwZW5kKG15QXVkaW8pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcGF1c2VUaGVTb3VuZCgpIHtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUF1ZGlvJykucGF1c2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzdW1lVGhlU291bmQoKSB7XHJcbiAgICBsZXQgcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lQXVkaW8nKS5wbGF5O1xyXG4gICAgcGxheS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lQXVkaW8nKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZVZvbHVtZShudW1iZXIpIHtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUF1ZGlvJykudm9sdW1lICo9IG51bWJlcjtcclxuICBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUF1ZGlvJykudm9sdW1lKTtcclxufVxyXG4iLCJpbXBvcnQge2xhdW5jaFNvdW5kfSBmcm9tICcuL2xhdW5jaFNvdW5kJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxhdW5jaEluaXRpYWxXaW5kb3coKSB7XHJcblxyXG4gIGxhdW5jaExvYWRlcigpO1xyXG4gIGxhdW5jaFNvdW5kKFwiQ2FrZXRvd25cIiwgZmFsc2UsIHRydWUsIHRydWUpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gICBsYXVuY2hMb2FkZXIoKSB7XHJcbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgcHJlbG9hZGVyID0gJCgnLmxvYWRlckFyZWEnKTtcclxuICAgIGxldCBsb2FkZXIgPSBwcmVsb2FkZXIuZmluZCgnLmxvYWRlcicpO1xyXG4gICAgbG9hZGVyLmZhZGVPdXQoKTtcclxuICAgIHByZWxvYWRlci5kZWxheSgzNTApLmZhZGVPdXQoJ3Nsb3cnKTtcclxuICB9KTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCBzdXJuYW1lLCBlbWFpbCkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuc3VybmFtZSA9IHN1cm5hbWU7XHJcbiAgICB0aGlzLmVtYWlsID0gZW1haWw7XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICB9XHJcblxyXG4gIGdldCBmdWxsTmFtZSgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLm5hbWV9ICR7dGhpcy5zdXJuYW1lfWA7XHJcbiAgfVxyXG5cclxuICBzZXQgZnVsbE5hbWUobmV3VmFsdWUpIHtcclxuICAgIFt0aGlzLm5hbWUsIHRoaXMuc3VybmFtZV0gPSBuZXdWYWx1ZS5zcGxpdCgnICcpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFVzZXIgZnJvbSBcIi4uL2NsYXNzZXMvVXNlclwiO1xyXG5cclxuZXhwb3J0IHthZGRVc2VyRGF0YVRvTG9jYWxTdG9yYWdlLCB1c2VyLCB1c2Vyc0FycmF5LCB1c2Vyc1N0b3JhZ2V9O1xyXG5cclxuY29uc3QgdXNlcnNTdG9yYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2Vyc1wiKTtcclxubGV0IHVzZXI7XHJcblxyXG5sZXQgdXNlcnNBcnJheTtcclxuXHJcbmZ1bmN0aW9uIGFkZFVzZXJEYXRhVG9Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgdXNlciA9IG5ldyBVc2VyKCQoJyNmaXJzdC1uYW1lJykudmFsKCksICQoJyNsYXN0LW5hbWUnKS52YWwoKSwgJCgnI2VtYWlsJykudmFsKCkpO1xyXG4gIHVzZXIuZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHVzZXIpO1xyXG5cclxuICAvLyBpZiB1c2VycyBTdG9yYWdlIGlzIGVtcHR5IGNyZWF0ZSBsb2NhbFN0b3JhZ2VcclxuICBpZiAoIXVzZXJzU3RvcmFnZSkge1xyXG4gICAgdXNlcnNBcnJheSA9IFt1c2VyLmRhdGFTdHJpbmddO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2Vyc1wiLCBKU09OLnN0cmluZ2lmeSh1c2Vyc0FycmF5KSk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBhZGRUb1N0b3JhZ2UoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFRvU3RvcmFnZSgpIHtcclxuXHJcbiAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdXNlciBpcyBhbHJlYWR5IGluIGxvY2FsU3RvcmFnZVxyXG4gICAgICB1c2Vyc0FycmF5ID0gSlNPTi5wYXJzZSh1c2Vyc1N0b3JhZ2UpO1xyXG4gICAgICBpZiAodXNlcnNBcnJheS5pbmNsdWRlcyh1c2VyLmRhdGFTdHJpbmcpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhbmQgaWYgbm90IGNoYW5nZSBsb2NhbFN0b3JhZ2UgZGF0YVxyXG4gICAgICB1c2Vyc0FycmF5LnB1c2godXNlci5kYXRhU3RyaW5nKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2Vyc1wiLCBKU09OLnN0cmluZ2lmeSh1c2Vyc0FycmF5KSk7XHJcbn1cclxuIiwiZXhwb3J0IHtjaGFuZ2VXaW5kb3csIHNob3dXaW5kb3csIGhpZGVXaW5kb3d9O1xyXG5cclxuZnVuY3Rpb24gY2hhbmdlV2luZG93KGl0ZW1Ub0hpZGUsIGl0ZW1Ub1Nob3csIC4uLmFyZ3MpIHtcclxuICAkKGl0ZW1Ub0hpZGUpLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpIHtcclxuICAgICQoaXRlbVRvU2hvdykuZmFkZUluKDgwMCk7XHJcbiAgfSk7XHJcbiAgaWYoYXJncykge1xyXG4gICAgYXJncy5mb3JFYWNoKGl0ZW09PiAkKGl0ZW0pLmZhZGVPdXQoODAwKSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93V2luZG93KC4uLmFyZ3MgKSB7XHJcbiAgICBhcmdzLmZvckVhY2goaXRlbT0+ICQoaXRlbSkuZmFkZUluKDgwMCkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVXaW5kb3coLi4uYXJncykge1xyXG4gIGFyZ3MuZm9yRWFjaChpdGVtPT4gJChpdGVtKS5mYWRlT3V0KDgwMCkpXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoeENvb3JkaW5hdGUsIHlDb29yZGluYXRlLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KSB7XHJcblxyXG4gICAgdGhpcy54Q29vcmRpbmF0ZSA9IHhDb29yZGluYXRlO1xyXG4gICAgdGhpcy55Q29vcmRpbmF0ZSA9IHlDb29yZGluYXRlO1xyXG4gICAgdGhpcy5jYW52YXNXaWR0aCA9IGNhbnZhc1dpZHRoO1xyXG4gICAgdGhpcy5jYW52YXNIZWlnaHQgPSBjYW52YXNIZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBkZWNyZWFzZUhlYWx0aChoZWFsdGhJZCwgdGFza1BvaW50cykge1xyXG5cclxuICAgIGxldCBkb2MgPSBkb2N1bWVudDtcclxuICAgIGxldCBjdXJyZW50UG9pbnRzID0gZG9jLmdldEVsZW1lbnRCeUlkKGhlYWx0aElkKS5pbm5lckhUTUw7XHJcbiAgICBsZXQgd2hvSXNEZWFkID0gJ25vYm9keSc7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRQb2ludHMgPiB0YXNrUG9pbnRzKSB7XHJcbiAgICAgIGRvYy5nZXRFbGVtZW50QnlJZChoZWFsdGhJZCkuaW5uZXJIVE1MIC09IHRhc2tQb2ludHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoaGVhbHRoSWQpLmlubmVySFRNTCA9IDA7XHJcblxyXG4gICAgICBpZiAoaGVhbHRoSWQgPT0gJ3BsYXllckhlYWx0aCcpIHtcclxuICAgICAgICB3aG9Jc0RlYWQgPSAncGxheWVyJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJTY29yZVwiKS5pbm5lckhUTUwgPSArZG9jLmdldEVsZW1lbnRCeUlkKFwicGxheWVyU2NvcmVcIikuaW5uZXJIVE1MICsgMTtcclxuICAgICAgICB3aG9Jc0RlYWQgPSAnbW9uc3Rlcic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB3aG9Jc0RlYWQ7XHJcbiAgfVxyXG5cclxuICByZXNldEhlYWx0aChoZWFsdGhJZCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGVhbHRoSWQpLmlubmVySFRNTCA9IDEwMDtcclxuICB9XHJcbiAgXHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XHJcblxyXG5leHBvcnQge1BsYXllcn07XHJcblxyXG5jbGFzcyBQbGF5ZXIgZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgY2hhcmFjdGVyLCB3aWR0aCwgaGVpZ2h0LCBzcHJpdGUsIGZ1bGxOYW1lKXtcclxuICAgIHN1cGVyKHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcbiAgICB0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3RlcjtcclxuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5zcHJpdGUgPSBzcHJpdGU7XHJcbiAgICB0aGlzLmZ1bGxOYW1lID0gZnVsbE5hbWU7XHJcblxyXG4gIH1cclxuICBkcmF3KCkge1xyXG4gICAgbGV0IGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgY3R4LmNsZWFyUmVjdCh0aGlzLnhDb29yZGluYXRlLCB0aGlzLnlDb29yZGluYXRlLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG4gICAgdGhpcy5zcHJpdGUueENvb3JkaW5hdGUgPVxyXG4gICAgICAgICh0aGlzLnNwcml0ZS54Q29vcmRpbmF0ZSA9PT0gKHRoaXMuc3ByaXRlLndpZHRoIC0gdGhpcy53aWR0aClcclxuICAgICAgICAgPyAwXHJcbiAgICAgICAgIDogdGhpcy5zcHJpdGUueENvb3JkaW5hdGUgKyB0aGlzLndpZHRoKTtcclxuXHJcbiAgICBjdHguZHJhd0ltYWdlKHRoaXMuc3ByaXRlLnNyYywgdGhpcy5zcHJpdGUueENvb3JkaW5hdGUsIHRoaXMuc3ByaXRlLnlDb29yZGluYXRlLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy54Q29vcmRpbmF0ZSwgdGhpcy55Q29vcmRpbmF0ZSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TmFtZSAoKSB7XHJcbiAgICAkKCcjdXNlck5hbWUnKS50ZXh0KHRoaXMuZnVsbE5hbWUpO1xyXG4gIH1cclxuXHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwcml0ZXtcclxuICBjb25zdHJ1Y3RvcihzcmMsIHdpZHRoLCBoZWlnaHQsIHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSwgY29sdW1ucywgcm93cykge1xyXG4gICAgdGhpcy5zcmMgPSBzcmM7XHJcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIHRoaXMueENvb3JkaW5hdGUgPSB4Q29vcmRpbmF0ZTtcclxuICAgIHRoaXMueUNvb3JkaW5hdGUgPSB5Q29vcmRpbmF0ZTtcclxuICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XHJcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1BsYXllcn0gZnJvbSAnLi4vY2xhc3Nlcy9QbGF5ZXInO1xyXG5pbXBvcnQgU3ByaXRlIGZyb20gJy4uL2NsYXNzZXMvU3ByaXRlJztcclxuaW1wb3J0IHtjYW52YXNIZWlnaHQsIGN0eH0gZnJvbSAnLi9kcmF3Q2FudmFzJztcclxuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2FkZFVzZXJEYXRhVG9Mb2NhbFN0b3JhZ2UnO1xyXG5cclxuZXhwb3J0IHtkcmF3UGxheWVyLCBwbGF5ZXJ9O1xyXG5cclxuXHJcbmxldCBwbGF5ZXI7XHJcbmxldCB0aWNrQ291bnQgPSAwO1xyXG5cclxuZnVuY3Rpb24gZHJhd1BsYXllcigpIHtcclxuXHJcbiAgbGV0IGNoYXJhY3RlciA9ICQoJ2lucHV0W25hbWU9dXNlckNob2ljZV06Y2hlY2tlZCcsICdmb3JtJykudmFsKCk7XHJcbiAgbGV0IHNwcml0ZSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICBzcHJpdGUuc3JjID0gJ2ltZy8nICsgY2hhcmFjdGVyICsgJ1Nwcml0ZUlkbGUucG5nJztcclxuXHJcblxyXG4gIHNwcml0ZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgc3ByaXRlV2lkdGggPSBzcHJpdGUud2lkdGg7XHJcbiAgICBsZXQgc3ByaXRlSGVpZ2h0ID0gc3ByaXRlLmhlaWdodDtcclxuXHJcbiAgICBsZXQgbnVtYmVyT2ZDb2x1bW5zSW5TcHJpdGUgPSAxMDtcclxuICAgIGxldCBudW1iZXJPZlJvd3NJblNwcml0ZSA9IDE7XHJcblxyXG4gICAgbGV0IHBsYXllcldpZHRoID0gTWF0aC5mbG9vcihzcHJpdGVXaWR0aCAvIG51bWJlck9mQ29sdW1uc0luU3ByaXRlKTtcclxuICAgIGxldCBwbGF5ZXJIZWlnaHQgPSBNYXRoLmZsb29yKHNwcml0ZUhlaWdodCAvIG51bWJlck9mUm93c0luU3ByaXRlKTtcclxuXHJcbiAgICBsZXQgcGxheWVyQ29vcmRpbmF0ZVggPSBwbGF5ZXJXaWR0aCAvIDI7XHJcbiAgICBsZXQgcGxheWVyQ29vcmRpbmF0ZVkgPSBjYW52YXNIZWlnaHQgLSBwbGF5ZXJIZWlnaHQ7XHJcblxyXG4gICAgbGV0IHBsYXllclNwcml0ZSA9IG5ldyBTcHJpdGUoc3ByaXRlLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0LCAwLCAwLCBudW1iZXJPZkNvbHVtbnNJblNwcml0ZSwgbnVtYmVyT2ZSb3dzSW5TcHJpdGUpO1xyXG5cclxuICAgIHBsYXllciA9IG5ldyBQbGF5ZXIocGxheWVyQ29vcmRpbmF0ZVgsIHBsYXllckNvb3JkaW5hdGVZLCAxNDAwLCBjYW52YXNIZWlnaHQsIGNoYXJhY3RlciwgcGxheWVyV2lkdGgsIHBsYXllckhlaWdodCwgcGxheWVyU3ByaXRlLCB1c2VyLmZ1bGxOYW1lKTtcclxuICAgIFxyXG4gICAgcGxheWVyLnJlc2V0SGVhbHRoKFwicGxheWVySGVhbHRoXCIpO1xyXG4gICAgcGxheWVyLnNldE5hbWUoKTtcclxuICAgIHRpY2soKTtcclxuXHJcblxyXG4gIH0sIGZhbHNlKTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB0aWNrKCkge1xyXG4gIGlmICh0aWNrQ291bnQgPiAxNSkge1xyXG4gICAgcGxheWVyLmRyYXcoKTtcclxuICAgIHRpY2tDb3VudCA9IDA7XHJcbiAgfVxyXG5cclxuICB0aWNrQ291bnQgKz0gMTtcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21OdW1iZXIobWluLCBtYXgpIHtcclxuICBsZXQgcmFuZG9tID0gbWluICsgTWF0aC5yYW5kb20oKSAqIChtYXggKyAxIC0gbWluKTtcclxuICByYW5kb20gPSBNYXRoLmZsb29yKHJhbmRvbSk7XHJcbiAgcmV0dXJuIHJhbmRvbTtcclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcclxuaW1wb3J0IGdlbmVyYXRlUmFuZG9tTnVtYmVyIGZyb20gJy4uL21vZHVsZXMvZ2VuZXJhdGVSYW5kb21OdW1iZXInO1xyXG5leHBvcnQge01vbnN0ZXJ9O1xyXG5cclxuY2xhc3MgTW9uc3RlciBleHRlbmRzIENoYXJhY3RlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCl7XHJcbiAgICBzdXBlcih4Q29vcmRpbmF0ZSwgeUNvb3JkaW5hdGUsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xyXG4gIH1cclxuXHJcbiAgZHJhdyhhcnJheU9mUGFydHMsIGRyYXdpbmdGdW5jdGlvbikge1xyXG4gICAgYXJyYXlPZlBhcnRzLmZvckVhY2goIGl0ZW0gPT4gZHJhd2luZ0Z1bmN0aW9uKGl0ZW0pICk7XHJcbiAgfVxyXG5cclxuICBzZXROYW1lKG1vbnN0ZXJOYW1lc0FycmF5KSB7XHJcbiAgICBsZXQgbW9uc3Rlck5hbWUgPSBtb25zdGVyTmFtZXNBcnJheS5yZWR1Y2UoXHJcbiAgICAgIChhY2N1bXVsYXRvciwgY3VycmVudCkgPT5cclxuICAgICAgYWNjdW11bGF0b3IgKyAnICcgKyBjdXJyZW50W2dlbmVyYXRlUmFuZG9tTnVtYmVyKDEsIChjdXJyZW50Lmxlbmd0aC0xKSldICwgJydcclxuICAgICk7XHJcblxyXG4gICAgJCgnI21vbnN0ZXJOYW1lJykudGV4dChtb25zdGVyTmFtZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGUoKSB7XHJcbiAgICBsZXQgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGN0eC5jbGVhclJlY3QodGhpcy5jYW52YXNXaWR0aC10aGlzLnhDb29yZGluYXRlLTUsIHRoaXMuY2FudmFzSGVpZ2h0LXRoaXMueUNvb3JkaW5hdGUsIDMwMCwgMzAwKTtcclxuICB9XHJcblxyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL2F0dGFjazogZnVuY3Rpb25cclxuIiwiaW1wb3J0IHtNb25zdGVyfSBmcm9tICcuL01vbnN0ZXInO1xyXG5pbXBvcnQgZ2VuZXJhdGVSYW5kb21OdW1iZXIgZnJvbSAnLi4vbW9kdWxlcy9nZW5lcmF0ZVJhbmRvbU51bWJlcic7XHJcbi8vIGltcG9ydCB7Y2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgY3R4fSBmcm9tICcuLi9tb2R1bGVzL2RyYXdDYW52YXMnO1xyXG5cclxuZXhwb3J0IHtNb25zdGVyUGFydH07XHJcbmNsYXNzIE1vbnN0ZXJQYXJ0IGV4dGVuZHMgTW9uc3RlciB7XHJcbiAgY29uc3RydWN0b3IoeENvb3JkaW5hdGUsIHlDb29yZGluYXRlLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0LCBwYXJ0LCBtYXhOdW1iZXJPZlBhcnRzLCBvZmZzZXQsIGN0eCwgZHJhd0Nvb3JkaW5hdGVYLCBkcmF3Q29vcmRpbmF0ZVkpIHtcclxuICAgIHN1cGVyKHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcbiAgICB0aGlzLnBhcnQgPSBwYXJ0O1xyXG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICB0aGlzLm1heE51bWJlck9mUGFydHMgPSBtYXhOdW1iZXJPZlBhcnRzO1xyXG4gICAgdGhpcy5udW1iZXJPZlBhcnRzID0gZ2VuZXJhdGVSYW5kb21OdW1iZXIoMSwgbWF4TnVtYmVyT2ZQYXJ0cyk7XHJcbiAgICB0aGlzLnNyYyA9IFwiaW1nL21vbnN0ZXIgcGFydHMvXCIgKyB0aGlzLnBhcnQgKyBcIi5wbmdcIjtcclxuICAgIHRoaXMuY3R4ID0gY3R4O1xyXG4gICAgdGhpcy5kcmF3Q29vcmRpbmF0ZVggPSBkcmF3Q29vcmRpbmF0ZVggfHwgTWF0aC5mbG9vcih0aGlzLmNhbnZhc1dpZHRoIC0geENvb3JkaW5hdGUpO1xyXG4gICAgdGhpcy5kcmF3Q29vcmRpbmF0ZVkgPSBkcmF3Q29vcmRpbmF0ZVkgfHwgTWF0aC5mbG9vcih0aGlzLmNhbnZhc0hlaWdodCAtIHlDb29yZGluYXRlKTtcclxuICB9XHJcblxyXG5cclxuICBkcmF3KCkge1xyXG4gICAgbGV0IGNvdW50ZXIgPSAxO1xyXG5cclxuICAgIHdoaWxlICh0aGlzLm51bWJlck9mUGFydHMgPj0gY291bnRlcikge1xyXG4gICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGhpcy5kcmF3Q29vcmRpbmF0ZVgsIHRoaXMuZHJhd0Nvb3JkaW5hdGVZKTtcclxuXHJcbiAgICAgIGNvdW50ZXIgKz0gMTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9mZnNldCA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3Q29vcmRpbmF0ZVggKz0gNDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kcmF3Q29vcmRpbmF0ZVkgKz0gNDA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7TW9uc3Rlcn0gZnJvbSAnLi4vY2xhc3Nlcy9Nb25zdGVyJztcclxuaW1wb3J0IHtNb25zdGVyUGFydH0gZnJvbSAnLi4vY2xhc3Nlcy9Nb25zdGVyUGFydCc7XHJcbmltcG9ydCB7Y2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgY3R4fSBmcm9tICcuL2RyYXdDYW52YXMnO1xyXG5cclxuZXhwb3J0IHtkcmF3TW9uc3RlciwgbW9uc3Rlcn07XHJcblxyXG5sZXQgbW9uc3RlclR5cGVBcnJheSA9IFtcIk9ncmVcIiwgXCJEd2FyZlwiLCBcIkRyYWdvblwiLCBcIlpvbWJpZVwiLCBcIkJhc3RhcmRcIiwgXCJCdWdnZXJcIiwgXCJXaXphcmRcIiwgXCJHaWFudFwiLCBcIkVsZlwiLCBcIk9uaVwiLCBcIkRlbW9uXCIsIFwiVW5kZWFkXCIsIFwiUG9ueVwiLCBcIlZhbXBpcmVcIiwgXCJXZXJld29sZlwiLCBcIlN1Y2N1YnVzXCIsIFwiSHVtYW5vaWRcIiwgXCJIYWxmbGluZ1wiLCBcIkdvbGVtXCIsIFwiR25vbGxcIiwgXCJGYWlyeVwiLCBcIk1hbnRpY29yZVwiLCBcIkZyYW5rZW5zdGVpblwiLCBcIkV4LXdpZmVcIl07XHJcblxyXG5sZXQgbW9uc3Rlck5hbWVBcnJheSA9IFtcIkpvaG5cIiwgXCJXaWxsXCIsIFwiRG9uYWxkXCIsIFwiQmlsbFwiLCBcIkFybm9sZFwiLCBcIlRvbVwiLCBcIkdhcnJ5XCIsIFwiUm9uXCIsIFwiVm9sZGVtb3J0XCIsIFwiSmVycnlcIiwgXCJBbnRob255XCIsIFwiRWR1YXJkXCIsIFwiRXJpY1wiLCBcIkplY2tcIiwgXCJMZW9cIiwgXCJCcmFkXCIsIFwiTGlcIiwgXCJSeWFuXCIsIFwiQWxleFwiLCBcIkRhblwiLCBcIkxvZ2FuXCIsIFwiSGVucnlcIiwgXCJQaXR0ZXJcIiwgXCJTYW1cIl07XHJcblxyXG5sZXQgbW9uc3Rlck5pY2tBcnJheSA9IFtcIkhpZGVvdXNcIiwgXCJXaWNrZWRcIiwgXCJEYW5nZXJvdXNcIiwgXCJFdmlsXCIsIFwiRmVhcnNvbWVcIiwgXCJHcmVlZHlcIiwgXCJBd2Z1bFwiLCBcIkRyZWFkZnVsXCIsIFwiVm9yYWNpb3VzXCIsIFwiSG9ycmlibGVcIiwgXCJUZXJyaWZpY1wiLCBcIk1vb2R5XCIsIFwiU2x5XCIsIFwiQ3VubmluZ1wiLCBcIk1pZ2h0eVwiLCBcIlNpbGx5XCIsIFwiRHVtcHlcIiwgXCJDcmF6eVwiLCBcIlN0dXBpZFwiLCBcIkRlbnNlXCJdO1xyXG5cclxubGV0IG1vbnN0ZXJOYW1lc0FycmF5ID0gW21vbnN0ZXJUeXBlQXJyYXksIG1vbnN0ZXJOaWNrQXJyYXksICBtb25zdGVyTmFtZUFycmF5XTtcclxuXHJcbmxldCBtb25zdGVyO1xyXG5cclxuZnVuY3Rpb24gZHJhd01vbnN0ZXIoKSB7XHJcblxyXG4gICAgICBtb25zdGVyID0gbmV3IE1vbnN0ZXIoMzAwLCAyMDAsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xyXG4gICAgICBtb25zdGVyLnNldE5hbWUobW9uc3Rlck5hbWVzQXJyYXkpO1xyXG4gICAgICBtb25zdGVyLnJlc2V0SGVhbHRoKCdtb25zdGVySGVhbHRoJyk7XHJcblxyXG4gICAgICBsZXQgYXJyYXlPZlBhcnRzID0gW107XHJcblxyXG4gICAgICBsZXQgYm9keSA9IG5ldyBNb25zdGVyUGFydCgyMDAsIDIwMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgXCJCb2R5XCIsIDEsICdob3Jpem9udGFsJywgY3R4KTtcclxuICAgICAgbGV0IGZvb3QgPSBuZXcgTW9uc3RlclBhcnQoMjAwLCA1MCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgXCJGb290XCIsIDQsICdob3Jpem9udGFsJywgY3R4KTtcclxuICAgICAgbGV0IHJpZ2h0SGFuZCA9IG5ldyBNb25zdGVyUGFydCgxMDAsIDgwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0LCBcIlJpZ2h0SGFuZFwiLCAyLCAnaG9yaXpvbnRhbCcsIGN0eCk7XHJcbiAgICAgIGxldCBsZWZ0SGFuZCA9IG5ldyBNb25zdGVyUGFydCgzMDAsIDE5MCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgXCJMZWZ0SGFuZDFcIiwgMywgJ3ZlcnRpY2FsJywgIGN0eCApO1xyXG5cclxuICAgICAgYXJyYXlPZlBhcnRzLnB1c2goYm9keSwgZm9vdCwgcmlnaHRIYW5kLCBsZWZ0SGFuZCk7XHJcblxyXG4gICAgICBtb25zdGVyLmRyYXcoYXJyYXlPZlBhcnRzLCBkcmF3VGhlUGFydCk7XHJcblxyXG5cclxufVxyXG5cclxuLy93ZSBjYW4ndCBzZXQgbGlzdGVuZXIgaW4gY29uc3RydWN0b3IsIGl0IHdvdWxkbid0IHdvcmssIHNvIHdlIG5lZWQgdG8gc2V0IHNlcGFyYXRlIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGRyYXdUaGVQYXJ0KHBhcnQpIHtcclxuICBwYXJ0LmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgcGFydC5pbWFnZS5zcmMgPSBwYXJ0LnNyYztcclxuICBwYXJ0LmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICBwYXJ0LmRyYXcoKTtcclxufSk7XHJcblxyXG59XHJcbiIsImltcG9ydCB7ZHJhd1BsYXllciwgcGxheWVyfSBmcm9tIFwiLi9kcmF3UGxheWVyXCI7XHJcbmltcG9ydCB7ZHJhd01vbnN0ZXJ9IGZyb20gXCIuL2RyYXdNb25zdGVyXCI7XHJcblxyXG5leHBvcnQge2RyYXdDYW52YXMsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIGN0eH07XHJcblxyXG5sZXQgY2FudmFzO1xyXG5sZXQgY3R4O1xyXG5sZXQgY2FudmFzV2lkdGggPSAxMDAwO1xyXG5sZXQgY2FudmFzSGVpZ2h0O1xyXG5cclxuZnVuY3Rpb24gZHJhd0NhbnZhcygpIHtcclxuXHJcbiAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbiAgaWYgKGNhbnZhcy5nZXRDb250ZXh0KSB7XHJcblxyXG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSBjYW52YXNXaWR0aCA9ICgkKHdpbmRvdykud2lkdGgoKSkgKiAwLjk1O1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGNhbnZhc0hlaWdodCA9ICgkKHdpbmRvdykuaGVpZ2h0KCkpICogMC41O1xyXG5cclxuICAgIGRyYXdQbGF5ZXIoKTtcclxuICAgIC8vICAgY29uc29sZS5sb2cocGxheWVyKTsvL21pbmVcclxuICAgIGRyYXdNb25zdGVyKCk7IC8vbWluZVxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coXCLQsdGA0LDRg9C30LXRgCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiBjYW52YXNcIik7XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgIHthZGRVc2VyRGF0YVRvTG9jYWxTdG9yYWdlfSBmcm9tIFwiLi9hZGRVc2VyRGF0YVRvTG9jYWxTdG9yYWdlXCI7XHJcbmltcG9ydCB7Y2hhbmdlV2luZG93fSBmcm9tICcuL2NoYW5nZVdpbmRvd0Z1bmN0aW9ucyc7XHJcbmltcG9ydCB7ZHJhd0NhbnZhc30gZnJvbSBcIi4vZHJhd0NhbnZhc1wiO1xyXG5pbXBvcnQge2xhdW5jaFNvdW5kfSBmcm9tICcuL2xhdW5jaFNvdW5kJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0VGhlR2FtZSgpIHtcclxuXHJcbiAgYWRkVXNlckRhdGFUb0xvY2FsU3RvcmFnZSgpO1xyXG4gIGNoYW5nZVdpbmRvdyhcIi5mb3JtLXdyYXBwZXJcIiwgXCIuZ2FtZVdpbmRvd1wiKTtcclxuICBsYXVuY2hTb3VuZChcIkJhdHRsZVRoZW1lXCIsIHRydWUsIHRydWUpO1xyXG4gIGRyYXdDYW52YXMoKTtcclxuXHJcblxyXG59XHJcbiIsImltcG9ydCB7dXNlcn0gZnJvbSAnLi9hZGRVc2VyRGF0YVRvTG9jYWxTdG9yYWdlJztcclxuaW1wb3J0IHtzaG93V2luZG93fSBmcm9tICcuL2NoYW5nZVdpbmRvd0Z1bmN0aW9ucyc7XHJcblxyXG5leHBvcnQge3Nob3dTY29yZX07XHJcblxyXG5sZXQgdXNlcnNBcnJheTtcclxuXHJcbmZ1bmN0aW9uIHNob3dTY29yZSgpIHtcclxuXHJcbiAgc2V0VXNlclNjb3JlSW5Mb2NhbGVTdG9yYWdlKCk7XHJcbiAgdXNlcnNBcnJheS5zb3J0KGNvbXBhcmVTY29yZSk7XHJcbiAgc2hvd1Njb3JlSW5UYWJsZSh1c2Vyc0FycmF5KTtcclxuICByZWZyZXNoTG9jYWxlU3RvcmFnZSh1c2Vyc0FycmF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VXNlclNjb3JlSW5Mb2NhbGVTdG9yYWdlKCkge1xyXG5cclxuICBjb25zdCB1c2Vyc1N0b3JhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJzXCIpO1xyXG4gIHVzZXJzQXJyYXkgPSBKU09OLnBhcnNlKHVzZXJzU3RvcmFnZSk7XHJcbiAgbGV0IHVzZXJJbmRleCA9IHVzZXJzQXJyYXkuaW5kZXhPZih1c2VyLmRhdGFTdHJpbmcpO1xyXG4gIHVzZXJzQXJyYXkgPSB1c2Vyc0FycmF5Lm1hcChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtKTtcclxuICB9KTtcclxuXHJcbiAgdXNlcnNBcnJheVt1c2VySW5kZXhdLnNjb3JlID0gcGFyc2VJbnQoJCgnI3BsYXllclNjb3JlJykuaHRtbCgpKTtcclxufVxyXG4vL1xyXG5mdW5jdGlvbiBzaG93U2NvcmVJblRhYmxlKGFycmF5KSB7XHJcbiAgbGV0IHNjb3JlVGFibGVMZW5ndGggPSAxO1xyXG4gIGFycmF5LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBpZiAoaXRlbS5zY29yZSAmJiBzY29yZVRhYmxlTGVuZ3RoIDw9IDEwICkgeyAvL2l0ZW0uc2NvcmUgJiZcclxuICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgbGkuaW5uZXJIVE1MID0gc2NvcmVUYWJsZUxlbmd0aCArICcuICcgKyAgaXRlbS5uYW1lICsgXCIgXCIgKyBpdGVtLnN1cm5hbWUgKyBcIjogXCIgKyBpdGVtLnNjb3JlICsgJyBtb25zdGVyKHMpJztcclxuICAgICAgJCgnI3Njb3JlTGlzdCcpLmFwcGVuZChsaSk7XHJcbiAgICAgIHNjb3JlVGFibGVMZW5ndGggKz0gMTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBzaG93V2luZG93KCcjcmVzdWx0c1dpbmRvdycsICcjYmdPcGFjaXR5Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZnJlc2hMb2NhbGVTdG9yYWdlKGFycmF5KSB7XHJcbiAgdXNlcnNBcnJheSA9IHVzZXJzQXJyYXkubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtKTtcclxuICB9KTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJzXCIsIEpTT04uc3RyaW5naWZ5KHVzZXJzQXJyYXkpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcGFyZVNjb3JlKHVzZXJBLCB1c2VyQikge1xyXG4gIHJldHVybiB1c2VyQi5zY29yZSAtIHVzZXJBLnNjb3JlO1xyXG59XHJcbiIsImltcG9ydCBsYXVuY2hJbml0aWFsV2luZG93IGZyb20gXCIuLi9tb2R1bGVzL2xhdW5jaEluaXRpYWxXaW5kb3dcIjtcclxuaW1wb3J0IHN0YXJ0VGhlR2FtZSBmcm9tIFwiLi4vbW9kdWxlcy9zdGFydFRoZUdhbWVcIjtcclxuXHJcbmltcG9ydCB7bGF1bmNoU291bmR9IGZyb20gJy4uL21vZHVsZXMvbGF1bmNoU291bmQnO1xyXG5pbXBvcnQge2RyYXdNb25zdGVyLCBtb25zdGVyfSBmcm9tICcuLi9tb2R1bGVzL2RyYXdNb25zdGVyJztcclxuaW1wb3J0IHtzaG93U2NvcmV9IGZyb20gJy4uL21vZHVsZXMvc2hvd1Njb3JlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xyXG5cclxuICBwcmVzdGFydCgpIHtcclxuICAgIGxhdW5jaEluaXRpYWxXaW5kb3coKTtcclxuICB9O1xyXG4gIHN0YXJ0KCkge1xyXG4gICAgc3RhcnRUaGVHYW1lKCk7XHJcbiAgfVxyXG4gIG5ld1JvdW5kKCkge1xyXG4gICAgc2V0VGltZW91dChsYXVuY2hTb3VuZCwgMjAwMCwgXCJKaW5nbGVcIiwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgIHNldFRpbWVvdXQobW9uc3Rlci5kZWxldGUuYmluZChtb25zdGVyKSwgMTUwMCk7XHJcbiAgICAgc2V0VGltZW91dChkcmF3TW9uc3RlciwgMzAwMCk7XHJcbiAgICAgc2V0VGltZW91dChsYXVuY2hTb3VuZCwgMzUwMCwgXCJCYXR0bGVUaGVtZVwiLCB0cnVlLCB0cnVlKTtcclxuICB9XHJcblxyXG4gICBmaW5pc2ggKHdpbm5lcikge1xyXG4gICAgIHdpbm5lciA9PSAnbW9uc3RlcicgPyAgc2V0VGltZW91dChsYXVuY2hTb3VuZCwgMjAwMCwgXCJtb25zdGVyTGF1Z2h0ZXJcIiwgdHJ1ZSwgZmFsc2UpIDogc2V0VGltZW91dChsYXVuY2hTb3VuZCwgMjAwMCwgXCJKaW5nbGVcIiwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgIHNldFRpbWVvdXQoc2hvd1Njb3JlLCAyNTAwKTtcclxuXHJcbn1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcclxuXHJcbiAgY29uc3RydWN0b3IocG9pbnRzLCBmdW5jKSB7XHJcblxyXG4gICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XHJcbiAgICB0aGlzLmZ1bmMgPSBmdW5jO1xyXG4gIH1cclxuXHJcbiAgaW5zZXJ0VGFzayAodGFza0Rlc2NyaXB0aW9uKSB7XHJcbiAgICAkKCcjdGFza0Rlc2NyaXB0aW9uJykuaHRtbCh0YXNrRGVzY3JpcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgYWRkVG9BcnJheU9mVGFza3MgKGFycmF5T2ZUYXNrcykge1xyXG4gICAgYXJyYXlPZlRhc2tzLnB1c2godGhpcyk7XHJcbiAgfVxyXG5cclxuICBzZXRQYXR0ZXJuIChwYXR0ZXJuKSB7XHJcbiAgICAkKCcjYW5zd2VySW5wdXQnKS5hdHRyKCdwYXR0ZXJuJywgcGF0dGVybik7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgZ2VuZXJhdGVSYW5kb21OdW1iZXIgZnJvbSAnLi9nZW5lcmF0ZVJhbmRvbU51bWJlcic7XHJcbmltcG9ydCBUYXNrIGZyb20gJy4uL2NsYXNzZXMvVGFzayc7XHJcblxyXG5leHBvcnQge3NvbHZlQXJpdGhtZXRpY1Byb2JsZW0sIGFyaXRobWV0aWNUYXNrfTtcclxuXHJcbmxldCBhcml0aG1ldGljVGFzayA9IG5ldyBUYXNrKDIwLCBzb2x2ZUFyaXRobWV0aWNQcm9ibGVtKTtcclxuXHJcbmZ1bmN0aW9uIHNvbHZlQXJpdGhtZXRpY1Byb2JsZW0ob2JqKSB7XHJcblxyXG4gIHRoaXMuYXJyYXlPZk9wZXJhdG9ycyA9IFsnKicsICcvJywgJysnLCAnLSddO1xyXG4gIHRoaXMucmFuZG9tT3BlcmF0b3IgPSB0aGlzLmFycmF5T2ZPcGVyYXRvcnNbZ2VuZXJhdGVSYW5kb21OdW1iZXIoMCwgdGhpcy5hcnJheU9mT3BlcmF0b3JzLmxlbmd0aCAtIDEpXTtcclxuXHJcbiAgaWYgKHRoaXMucmFuZG9tT3BlcmF0b3IgPT09IFwiLVwiIHx8ICh0aGlzLnJhbmRvbU9wZXJhdG9yID09PSBcIitcIikpIHtcclxuICAgIHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIgPSBnZW5lcmF0ZVJhbmRvbU51bWJlcigtNTAsIDUwKTtcclxuICAgIHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIxID0gZ2VuZXJhdGVSYW5kb21OdW1iZXIoLTIwLCAyMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIgPSBnZW5lcmF0ZVJhbmRvbU51bWJlcigtMzAsIDMwKTtcclxuICAgIHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIxID0gZ2VuZXJhdGVSYW5kb21OdW1iZXIoMSwgMTApO1xyXG4gIH1cclxuXHJcblxyXG4gIHRoaXMubWV0aG9kcyA9IHtcclxuICAgICctJzogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICB9LFxyXG4gICAgJysnOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgIHJldHVybiBhICsgYjtcclxuICAgIH0sXHJcbiAgICAnLyc6IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgcmV0dXJuIGEgLyBiO1xyXG4gICAgfSxcclxuICAgICcqJzogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICByZXR1cm4gYSAqIGI7XHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIHRoaXMuYW5zd2VyID0gdGhpcy5tZXRob2RzW3RoaXMucmFuZG9tT3BlcmF0b3JdKHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIsIHRoaXMucmFuZG9tbHlHZW5lcmF0ZWROdW1iZXIxKTtcclxuXHJcbiAgLy9jaGVja2luZyBpZiBhbnN3ZXIgaXMgYW4gaW50ZWdlclxyXG4gIGlmICgodGhpcy5hbnN3ZXIgXiAwKSAhPT0gdGhpcy5hbnN3ZXIpIHtcclxuXHJcbiAgICB0aGlzLmFuc3dlciA9IHRoaXMuYW5zd2VyLnRvRml4ZWQoMSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgdGhpcy5pbnNlcnRUYXNrKFxyXG4gICAgYDxwPkVudGVyIGFuIGFuc3dlciB3aXRob3V0IHdoaXRlc3BhY2VzLjwvcD5cclxuICAgIDxwPiBJZiB0aGUgYW5zd2VyIGlzIG5vdCBhbiBpbnRlZ2VyLCB3cml0ZSBpdCB0aHJvdWdoIHRoZSBkb3Qgd2l0aCAxIGNoYXJhY3RlciBhZnRlciB0aGlzPC9wPlxyXG4gICAgPHA+ICR7dGhpcy5yYW5kb21seUdlbmVyYXRlZE51bWJlcn0gICR7dGhpcy5yYW5kb21PcGVyYXRvcn0gJHt0aGlzLnJhbmRvbWx5R2VuZXJhdGVkTnVtYmVyMX0gPSAgPC9wPmApO1xyXG5cclxuICB0aGlzLnNldFBhdHRlcm4oXCItP1swLTldezEsNH1cXC4/WzAtOV0/XCIpO1xyXG5cclxuICB0aGlzLmFuc3dlciArPSAnJztcclxuXHJcbn1cclxuIiwiaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJztcclxuXHJcbmV4cG9ydCB7RGljdGlvbmFyeVRhc2t9O1xyXG5cclxuY2xhc3MgRGljdGlvbmFyeVRhc2sgZXh0ZW5kcyBUYXNrIHtcclxuXHJcbiAgY29uc3RydWN0b3IocG9pbnRzLCBmdW5jKSB7XHJcbiAgICBzdXBlcihwb2ludHMsIGZ1bmMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRvd25sb2FkRGljdGlvbmFyeSgpIHtcclxuXHJcbiAgICByZXR1cm4gZmV0Y2goXCJkYXRhYmFzZS9kaWN0Lmpzb25cIilcclxuXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBnZW5lcmF0ZVJhbmRvbU51bWJlciBmcm9tICcuL2dlbmVyYXRlUmFuZG9tTnVtYmVyJztcclxuaW1wb3J0IHtEaWN0aW9uYXJ5VGFza30gZnJvbSAnLi4vY2xhc3Nlcy9EaWN0aW9uYXJ5VGFzayc7XHJcblxyXG5leHBvcnQge3RyYW5zbGF0aW9uVGFzaywgbGF1bmNoVHJhbnNsYXRpb25UYXNrfTtcclxuXHJcbmxldCB0cmFuc2xhdGlvblRhc2sgPSBuZXcgRGljdGlvbmFyeVRhc2soMzAsIGxhdW5jaFRyYW5zbGF0aW9uVGFzayk7XHJcblxyXG5mdW5jdGlvbiBsYXVuY2hUcmFuc2xhdGlvblRhc2sob2JqKSB7XHJcblxyXG4gICAgICBEaWN0aW9uYXJ5VGFzay5kb3dubG9hZERpY3Rpb25hcnkoKVxyXG5cclxuICAgIC50aGVuKGZ1bmN0aW9uKGRpY3Rpb25hcnlBcnJheSkge1xyXG5cclxuICAgICAgdHJhbnNsYXRpb25UYXNrLnJhbmRvbU51bWJlciA9IGdlbmVyYXRlUmFuZG9tTnVtYmVyKDAsIGRpY3Rpb25hcnlBcnJheS5sZW5ndGgtMSk7XHJcblxyXG4gICAgICB0cmFuc2xhdGlvblRhc2suYW5zd2VyID0gZGljdGlvbmFyeUFycmF5W3RyYW5zbGF0aW9uVGFzay5yYW5kb21OdW1iZXJdWzJdO1xyXG5cclxuICAgICAgdHJhbnNsYXRpb25UYXNrLnF1ZXN0aW9uID0gZGljdGlvbmFyeUFycmF5W3RyYW5zbGF0aW9uVGFzay5yYW5kb21OdW1iZXJdWzBdO1xyXG5cclxuICAgICAgdHJhbnNsYXRpb25UYXNrLmluc2VydFRhc2soYFRyYW5zbGF0ZSBmcm9tIEVuZ2xpc2ggdG8gUnVzc2lhbjogJHt0cmFuc2xhdGlvblRhc2sucXVlc3Rpb259YCk7XHJcblxyXG4gICAgICB0cmFuc2xhdGlvblRhc2suc2V0UGF0dGVybihcIlvQkC3Qr9CwLdGPXXsyLH1cIik7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbn1cclxuIiwiaW1wb3J0IGdlbmVyYXRlUmFuZG9tTnVtYmVyIGZyb20gJy4vZ2VuZXJhdGVSYW5kb21OdW1iZXInO1xyXG5pbXBvcnQge0RpY3Rpb25hcnlUYXNrfSBmcm9tICcuLi9jbGFzc2VzL0RpY3Rpb25hcnlUYXNrJztcclxuXHJcbmV4cG9ydCB7c29ydFRhc2ssIGxhdW5jaFNvcnRUYXNrfTtcclxuXHJcbmxldCBzb3J0VGFzayA9IG5ldyBEaWN0aW9uYXJ5VGFzaygxNSwgbGF1bmNoU29ydFRhc2spO1xyXG5cclxuZnVuY3Rpb24gbGF1bmNoU29ydFRhc2sob2JqKSB7XHJcblxyXG4gIERpY3Rpb25hcnlUYXNrLmRvd25sb2FkRGljdGlvbmFyeSgpXHJcblxyXG4gICAgLnRoZW4oZnVuY3Rpb24oZGljdGlvbmFyeUFycmF5KSB7XHJcblxyXG4gICAgICBzb3J0VGFzay5yYW5kb21OdW1iZXIgPSBnZW5lcmF0ZVJhbmRvbU51bWJlcigwLCBkaWN0aW9uYXJ5QXJyYXkubGVuZ3RoIC0gMSk7IC8vdG9kbyBpbiBjbGFzcz9cclxuICAgICAgc29ydFRhc2suYW5zd2VyID0gZGljdGlvbmFyeUFycmF5W3NvcnRUYXNrLnJhbmRvbU51bWJlcl1bMF07XHJcbiAgICAgIHNvcnRUYXNrLmluc2VydFRhc2soYDxwPk1ha2UgdXAgYSB3b3JkIG9yIHdyaXRlIGl0IGRvd248L3A+PHVsIGlkPVwic29ydFwiIGNsYXNzPSdzb3J0YWJsZSc+PC91bD5gKTtcclxuICAgICAgc29ydFRhc2suc2V0UGF0dGVybihcIltBLVphLXpdezIsfVwiKTtcclxuXHJcbiAgICAgIGxldCB3b3JkQXJyYXkgPSBzb3J0VGFzay5hbnN3ZXIuc3BsaXQoXCJcIik7XHJcbiAgICAgIHdvcmRBcnJheS5zb3J0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAuNSAtIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgd29yZEFycmF5LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2lkJywgaXRlbSk7XHJcbiAgICAgICAgbGkuaW5uZXJIVE1MID0gaXRlbTtcclxuICAgICAgICAkKCcjc29ydCcpLmFwcGVuZChsaSk7XHJcblxyXG4gICAgICB9KVxyXG5cclxuICAgICAgJChcIiNzb3J0XCIpLnNvcnRhYmxlKHtcclxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgLy9jaGVjayBpZiBjb3JyZWN0XHJcbiAgICAgICAgICBsZXQgc29ydGVkSURzID0gJChcIiNzb3J0XCIpLnNvcnRhYmxlKFwidG9BcnJheVwiKS5qb2luKFwiXCIpO1xyXG5cclxuICAgICAgICAgIGlmIChzb3J0ZWRJRHMgPT0gc29ydFRhc2suYW5zd2VyKSB7XHJcbiAgICAgICAgICAgIHNvcnRUYXNrLmlzQW5zd2VyUmlnaHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCcjU3VibWl0VGhlQW5zd2VyJykuc3VibWl0KCk7XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4iLCJpbXBvcnQgZ2VuZXJhdGVSYW5kb21OdW1iZXIgZnJvbSAnLi9nZW5lcmF0ZVJhbmRvbU51bWJlcic7XHJcbmltcG9ydCB7RGljdGlvbmFyeVRhc2t9IGZyb20gJy4uL2NsYXNzZXMvRGljdGlvbmFyeVRhc2snO1xyXG5pbXBvcnQge3BhdXNlVGhlU291bmQsIHJlc3VtZVRoZVNvdW5kfSBmcm9tICcuL2xhdW5jaFNvdW5kJztcclxuXHJcbmV4cG9ydCB7bGlzdGVuaW5nVGFzaywgbGF1bmNoTGlzdGVuaW5nVGFza307XHJcblxyXG5sZXQgbGlzdGVuaW5nVGFzayA9IG5ldyBEaWN0aW9uYXJ5VGFzaygxNSwgbGF1bmNoTGlzdGVuaW5nVGFzayk7XHJcblxyXG5mdW5jdGlvbiBsYXVuY2hMaXN0ZW5pbmdUYXNrKG9iaikge1xyXG5cclxuICBEaWN0aW9uYXJ5VGFzay5kb3dubG9hZERpY3Rpb25hcnkoKVxyXG5cclxuICAgIC50aGVuKGZ1bmN0aW9uKGRpY3Rpb25hcnlBcnJheSkge1xyXG5cclxuICAgICAgbGlzdGVuaW5nVGFzay5yYW5kb21OdW1iZXIgPSBnZW5lcmF0ZVJhbmRvbU51bWJlcigwLCBkaWN0aW9uYXJ5QXJyYXkubGVuZ3RoIC0gMSk7IC8vdG9kbyBpbiBjbGFzcz9cclxuXHJcbiAgICAgIGxpc3RlbmluZ1Rhc2suYW5zd2VyID0gZGljdGlvbmFyeUFycmF5W2xpc3RlbmluZ1Rhc2sucmFuZG9tTnVtYmVyXVswXTtcclxuXHJcbiAgICAgIGxpc3RlbmluZ1Rhc2sucXVlc3Rpb24gPSBkaWN0aW9uYXJ5QXJyYXlbbGlzdGVuaW5nVGFzay5yYW5kb21OdW1iZXJdWzBdO1xyXG5cclxuICAgICAgbGlzdGVuaW5nVGFzay5pbnNlcnRUYXNrKGA8cD5Xcml0ZSB0aGUgd29yZCBpbiBFbmdsaXNoPC9wPlxyXG4gICAgICAgIDxidXR0b24gaWQ9J3NwZWxsaW5nQnV0dG9uJz5QdXNoIHRvIGxhdW5jaCBhdWRpbzwvYnV0dG9uPiBgKTtcclxuXHJcbiAgICAgIGxpc3RlbmluZ1Rhc2suc2V0UGF0dGVybihcIltBLVphLXpdezIsfVwiKTtcclxuXHJcbiAgICAgICQoJyNzcGVsbGluZ0J1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHBhdXNlVGhlU291bmQoKTtcclxuICAgICAgICBsZXQgc3ludGggPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzO1xyXG4gICAgICAgIGxldCB1dHRlclRoaXMgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKGxpc3RlbmluZ1Rhc2suYW5zd2VyKTtcclxuICAgICAgICB1dHRlclRoaXMubGFuZyA9ICdlbi1VUyc7XHJcbiAgICAgICAgc3ludGguc3BlYWsodXR0ZXJUaGlzKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc3VtZVRoZVNvdW5kLCAyMDAwKTtcclxuICAgICAgfSlcclxuXHJcbiAgICB9KTtcclxuXHJcbn1cclxuIiwiaW1wb3J0IGdlbmVyYXRlUmFuZG9tTnVtYmVyIGZyb20gJy4vZ2VuZXJhdGVSYW5kb21OdW1iZXInO1xyXG5pbXBvcnQgVGFzayBmcm9tICcuLi9jbGFzc2VzL1Rhc2snO1xyXG5cclxuZXhwb3J0IHtsYXVuY2hQcmltZVBvd2VyVGFzaywgcHJpbWVQb3dlclRhc2t9O1xyXG5cclxubGV0IHByaW1lUG93ZXJUYXNrID0gbmV3IFRhc2soMTAsIGxhdW5jaFByaW1lUG93ZXJUYXNrKTtcclxuXHJcbmZ1bmN0aW9uIGxhdW5jaFByaW1lUG93ZXJUYXNrKG9iaikge1xyXG5cclxuICB0aGlzLmFuc3dlciA9IGdlbmVyYXRlUmFuZG9tTnVtYmVyKDIsIDgpICsgXCJcIjtcclxuICB0aGlzLnJhbmRvbWx5R2VuZXJhdGVkTnVtYmVyID0gZ2VuZXJhdGVSYW5kb21OdW1iZXIoMSwgMTAwKSArIFwiXCI7XHJcbiAgdGhpcy50YXNrRGVzY3JpcHRpb25TdHJpbmcgPSBgICsgJHt0aGlzLnJhbmRvbWx5R2VuZXJhdGVkTnVtYmVyfWAucmVwZWF0KHRoaXMuYW5zd2VyIC0gMSk7XHJcbiAgdGhpcy5pbnNlcnRUYXNrKFxyXG4gICAgYDxwPldoYXQgaXMgdGhlIHByaW1lIHBvd2VyIG9mIHRoZSBudW1iZXI8L3A+XHJcbiAgICA8cD4gJHt0aGlzLnJhbmRvbWx5R2VuZXJhdGVkTnVtYmVyfSAgJHt0aGlzLnRhc2tEZXNjcmlwdGlvblN0cmluZ30gPC9wPmBcclxuICApO1xyXG5cclxuICB0aGlzLnNldFBhdHRlcm4oXCJbMC05XXsxfVwiKTtcclxuICB0aGlzLmFuc3dlciArPSAnJztcclxuXHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XHJcblxyXG5leHBvcnQge1NwZWxsfTtcclxuXHJcbmNsYXNzIFNwZWxsIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoeENvb3JkaW5hdGUsIHlDb29yZGluYXRlLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0LCBpbWFnZSwgd2lkdGgsIGhlaWdodCwgYm9yZGVyQ29vcmRpbmF0ZVgsIGRpcmVjdGlvbikge1xyXG4gICAgc3VwZXIoeENvb3JkaW5hdGUsIHlDb29yZGluYXRlLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KVxyXG4gICAgdGhpcy5pbWFnZSA9IGltYWdlO1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLmJvcmRlckNvb3JkaW5hdGVYID0gYm9yZGVyQ29vcmRpbmF0ZVg7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICB9XHJcblxyXG4gIGRyYXcoKSB7XHJcbiAgICBsZXQgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGN0eC5jbGVhclJlY3QodGhpcy54Q29vcmRpbmF0ZSwgdGhpcy55Q29vcmRpbmF0ZSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgdGhpcy54Q29vcmRpbmF0ZSArPSB0aGlzLmRpcmVjdGlvbjtcclxuICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGhpcy54Q29vcmRpbmF0ZSwgdGhpcy55Q29vcmRpbmF0ZSk7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtwbGF5ZXJ9IGZyb20gJy4vZHJhd1BsYXllcic7XHJcbmltcG9ydCB7U3BlbGx9IGZyb20gJy4uL2NsYXNzZXMvU3BlbGwnO1xyXG5pbXBvcnQge2N0eH0gZnJvbSAnLi9kcmF3Q2FudmFzJztcclxuXHJcbmV4cG9ydCB7bGF1bmNoU3BlbGxBbmltYXRpb259O1xyXG5cclxubGV0IHNwZWxsO1xyXG5cclxuZnVuY3Rpb24gbGF1bmNoU3BlbGxBbmltYXRpb24odGFyZ2V0KSB7XHJcbiAgbGV0IHNwZWxsSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgbGV0IHNwZWxsQ29vcmRpbmF0ZVkgPSBwbGF5ZXIueUNvb3JkaW5hdGUgKyBwbGF5ZXIuaGVpZ2h0IC8gMjtcclxuXHJcbiAgc3BlbGxJbWFnZS5zcmMgPSAnaW1nL2JsYWRlcy5wbmcnO1xyXG5cclxuICBzcGVsbEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgc3BlbGxXaWR0aCA9IHNwZWxsSW1hZ2Uud2lkdGg7XHJcbiAgICBsZXQgc3BlbGxIZWlnaHQgPSBzcGVsbEltYWdlLmhlaWdodDtcclxuXHJcbiAgICBsZXQgc3BlbGxDb29yZGluYXRlWDs7XHJcbiAgICBsZXQgc3BlbGxCb3JkZXJDb29yZGluYXRlWDtcclxuICAgIGxldCBzcGVsbEFuaW1hdGlvbkRpcmVjdGlvbjtcclxuXHJcbiAgICBpZiAodGFyZ2V0ID09PSAnbW9uc3RlcicpIHtcclxuXHJcbiAgICAgIHNwZWxsQ29vcmRpbmF0ZVggPSBwbGF5ZXIueENvb3JkaW5hdGUgKyBwbGF5ZXIud2lkdGggLyAyO1xyXG4gICAgICBzcGVsbEJvcmRlckNvb3JkaW5hdGVYID0gcGxheWVyLmNhbnZhc1dpZHRoIC0gNDMwIC0gc3BlbGxXaWR0aDtcclxuICAgICAgc3BlbGxBbmltYXRpb25EaXJlY3Rpb24gPSAxMDtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzcGVsbENvb3JkaW5hdGVYID0gcGxheWVyLmNhbnZhc1dpZHRoIC0gNDUwIC0gc3BlbGxXaWR0aDtcclxuICAgICAgc3BlbGxCb3JkZXJDb29yZGluYXRlWCA9IHBsYXllci54Q29vcmRpbmF0ZSArIHBsYXllci53aWR0aCAvIDI7XHJcbiAgICAgIHNwZWxsQW5pbWF0aW9uRGlyZWN0aW9uID0gLTEwO1xyXG4gICAgfVxyXG5cclxuICAgIHNwZWxsID0gbmV3IFNwZWxsKHNwZWxsQ29vcmRpbmF0ZVgsIHNwZWxsQ29vcmRpbmF0ZVksIHBsYXllci5jYW52YXNXaWR0aCwgcGxheWVyLmNhbnZhc0hlaWdodCwgc3BlbGxJbWFnZSwgc3BlbGxXaWR0aCwgc3BlbGxIZWlnaHQsIHNwZWxsQm9yZGVyQ29vcmRpbmF0ZVgsIHNwZWxsQW5pbWF0aW9uRGlyZWN0aW9uKTtcclxuXHJcbiAgICBhbmltYXRlU3BlbGwoKTtcclxuXHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBhbmltYXRlU3BlbGwoKSB7XHJcbiAgc3BlbGwuZHJhdygpO1xyXG4gIHNwZWxsLnJlcXVlc3RBbmltYXRpb25TcGVsbElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVTcGVsbCk7XHJcbiAgY2hlY2tCb3JkZXIoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNoZWNrQm9yZGVyKCkge1xyXG4gIGlmIChzcGVsbC5kaXJlY3Rpb24gPiAwKSB7XHJcbiAgICBpZiAoc3BlbGwueENvb3JkaW5hdGUgPiBzcGVsbC5ib3JkZXJDb29yZGluYXRlWCkge1xyXG5cclxuICAgICAgY2FuY2VsQW5pbWF0aW9uKCkgO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGlmIChzcGVsbC54Q29vcmRpbmF0ZSA8IHNwZWxsLmJvcmRlckNvb3JkaW5hdGVYKSB7XHJcblxyXG4gICAgICBjYW5jZWxBbmltYXRpb24oKSA7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYW5jZWxBbmltYXRpb24oKSB7XHJcblxyXG4gIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHNwZWxsLnJlcXVlc3RBbmltYXRpb25TcGVsbElkKTtcclxuICBjdHguY2xlYXJSZWN0KHNwZWxsLnhDb29yZGluYXRlLCBzcGVsbC55Q29vcmRpbmF0ZSwgc3BlbGwud2lkdGgsIHNwZWxsLmhlaWdodCk7XHJcblxyXG59XHJcbiIsImltcG9ydCBUYXNrIGZyb20gJy4uL2NsYXNzZXMvVGFzayc7XHJcbmltcG9ydCB7c29sdmVBcml0aG1ldGljUHJvYmxlbSwgYXJpdGhtZXRpY1Rhc2t9IGZyb20gJy4vc29sdmVBcml0aG1ldGljUHJvYmxlbSc7XHJcbmltcG9ydCB7dHJhbnNsYXRpb25UYXNrLCBsYXVuY2hUcmFuc2xhdGlvblRhc2t9IGZyb20gJy4vdHJhbnNsYXRpb25UYXNrJztcclxuaW1wb3J0IHtzb3J0VGFzaywgbGF1bmNoU29ydFRhc2t9IGZyb20gJy4vc29ydFRhc2snO1xyXG5pbXBvcnQge2xpc3RlbmluZ1Rhc2ssIGxhdW5jaExpc3RlbmluZ1Rhc2t9IGZyb20gJy4vbGlzdGVuaW5nVGFzayc7XHJcbmltcG9ydCB7bGF1bmNoUHJpbWVQb3dlclRhc2ssIHByaW1lUG93ZXJUYXNrfSBmcm9tICcuL3ByaW1lUG93ZXJUYXNrJztcclxuaW1wb3J0IHtsYXVuY2hTb3VuZCwgY2hhbmdlVm9sdW1lfSBmcm9tICcuL2xhdW5jaFNvdW5kJztcclxuaW1wb3J0IHtwbGF5ZXJ9IGZyb20gJy4vZHJhd1BsYXllcic7XHJcbmltcG9ydCB7bW9uc3Rlcn0gZnJvbSAnLi9kcmF3TW9uc3Rlcic7XHJcbmltcG9ydCB7bGF1bmNoU3BlbGxBbmltYXRpb259IGZyb20gJy4vbGF1bmNoU3BlbGxBbmltYXRpb24nO1xyXG5cclxuZXhwb3J0IHtcclxuICBsYXVuY2hUYXNrLFxyXG4gIGNoZWNrQW5zd2VyXHJcbn07XHJcblxyXG5sZXQgYXJyYXlPZlRhc2tzID0gW2FyaXRobWV0aWNUYXNrLCB0cmFuc2xhdGlvblRhc2ssIHNvcnRUYXNrLCBsaXN0ZW5pbmdUYXNrLCBwcmltZVBvd2VyVGFza107XHJcblxyXG5sZXQgdGFzaztcclxuXHJcbmZ1bmN0aW9uIGxhdW5jaFRhc2sodGFza051bWJlcikge1xyXG4gIC8vaW1wbGVtZW50IHRhc2sgZnVuY3Rpb25cclxuICB0YXNrID0gYXJyYXlPZlRhc2tzW3Rhc2tOdW1iZXJdO1xyXG5cclxuICBhcnJheU9mVGFza3NbdGFza051bWJlcl0uZnVuYyh0aGlzKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrQW5zd2VyKHRhc2tOdW1iZXIpIHtcclxuICBsZXQgY29ycmVjdEFuc3dlciA9IGFycmF5T2ZUYXNrc1t0YXNrTnVtYmVyXS5hbnN3ZXI7XHJcbiAgLy9hbnN3ZXJcclxuICBsZXQgaXNSaWdodDtcclxuICBsZXQgd2hvSXNEZWFkO1xyXG5cclxuXHJcblxyXG4gIGxldCB1c2VyQW5zd2VyID0gJCgnZm9ybSBbbmFtZT1cInVzZXItYW5zd2VyXCJdJykudmFsKCk7XHJcbiAgbGV0IGFycmF5T2ZBbnN3ZXJzID0gY29ycmVjdEFuc3dlci5zcGxpdChcIiwgXCIpO1xyXG4gIGFycmF5T2ZBbnN3ZXJzID0gYXJyYXlPZkFuc3dlcnMubWFwKGl0ZW0gPT4gbmV3IFJlZ0V4cChpdGVtLCAnaScpKTtcclxuXHJcbiAgYXJyYXlPZkFuc3dlcnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIGlmIChpdGVtLnRlc3QodXNlckFuc3dlcikpIHtcclxuICAgICAgaXNSaWdodCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmIChpc1JpZ2h0IHx8IGFycmF5T2ZUYXNrc1t0YXNrTnVtYmVyXS5pc0Fuc3dlclJpZ2h0KSB7IC8vZm9yIHNvcnRhYmxlIGNoZWNrXHJcblxyXG4gIC8vICBhbGVydCgneWVwJyk7XHJcbiAgICBsYXVuY2hTcGVsbEFuaW1hdGlvbignbW9uc3RlcicpO1xyXG5cclxuICAgIHdob0lzRGVhZCA9IG1vbnN0ZXIuZGVjcmVhc2VIZWFsdGgoXCJtb25zdGVySGVhbHRoXCIsIHRhc2sucG9pbnRzKTtcclxuXHJcbiAgfSBlbHNlIHtcclxuICAvLyAgYWxlcnQoJ25vcGUnKTtcclxuICAgIGxhdW5jaFNwZWxsQW5pbWF0aW9uKCdwbGF5ZXInKTtcclxuICAgIHdob0lzRGVhZCA9IHBsYXllci5kZWNyZWFzZUhlYWx0aChcInBsYXllckhlYWx0aFwiLCB0YXNrLnBvaW50cyk7XHJcbiAgfVxyXG5cclxuICBzZXRUaW1lb3V0KGxhdW5jaFNvdW5kLCA2MDAsIFwiQmxhc3RcIiwgZmFsc2UsIGZhbHNlKTtcclxuXHJcbiAgcmV0dXJuIHdob0lzRGVhZDtcclxufVxyXG4iLCJpbXBvcnQgR2FtZSBmcm9tIFwiLi9jbGFzc2VzL0dhbWVcIjtcclxuaW1wb3J0IHtsYXVuY2hUYXNrLCBjaGVja0Fuc3dlcn0gZnJvbSAnLi9tb2R1bGVzL2xhdW5jaFRhc2snO1xyXG5pbXBvcnQge2NoYW5nZVdpbmRvdywgc2hvd1dpbmRvdywgaGlkZVdpbmRvd30gZnJvbSAnLi9tb2R1bGVzL2NoYW5nZVdpbmRvd0Z1bmN0aW9ucyc7XHJcbmltcG9ydCB7Y2hhbmdlVm9sdW1lfSBmcm9tICcuL21vZHVsZXMvbGF1bmNoU291bmQnO1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICBsZXQgZ2FtZSA9IG5ldyBHYW1lKCk7XHJcbiAgZ2FtZS5wcmVzdGFydCgpO1xyXG5cclxuICAkKFwiI3VzZXJEYXRhRm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZ2FtZS5zdGFydCgpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgJChcIiNzcGVsbHNDaG9vc2luZ0J1dHRvblwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIHNob3dXaW5kb3coXCIjYmdPcGFjaXR5XCIsIFwiI21vZGFsV2luZG93XCIpO1xyXG4gIH0pO1xyXG5cclxuICBsZXQgdGFza051bWJlclxyXG5cclxuICAkKCcjc3BlbGxzTGlzdCcpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpID09ICdjbG9zZScpIHtcclxuICAgICAgaGlkZVdpbmRvdygnI21vZGFsV2luZG93JywgJyNiZ09wYWNpdHknKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNoYW5nZVdpbmRvdygnI21vZGFsV2luZG93V3JhcHBlcicsICcjdGFza1dyYXBwZXInKTtcclxuICAgICAgdGFza051bWJlciA9ICQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpIC0gMTtcclxuICAgICAgbGF1bmNoVGFzayh0YXNrTnVtYmVyKTtcclxuXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJyN1c2VyQW5zd2VyJykuc3VibWl0KGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCB3aG9Jc0RlYWQgPSBjaGVja0Fuc3dlcih0YXNrTnVtYmVyKTtcclxuXHJcbiAgICBpZiAod2hvSXNEZWFkID09ICdwbGF5ZXInKSB7XHJcbiAgICAgIC8vYWxlcnQoJ0RlYWQnKTtcclxuICAgICAgc2V0VGltZW91dChnYW1lLmZpbmlzaCgnbW9uc3RlcicpLCAyMDAwKTtcclxuICAgIH0gZWxzZSBpZiAod2hvSXNEZWFkID09ICdtb25zdGVyJykge1xyXG4gICAgLy8gIGFsZXJ0KFwibmV3IFJvdW5kXCIpO1xyXG4gICAgICBzZXRUaW1lb3V0KGdhbWUubmV3Um91bmQoKSwgMjAwMCk7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VXaW5kb3coJyNtb2RhbFdpbmRvdycsICcjbW9kYWxXaW5kb3dXcmFwcGVyJywgJyNiZ09wYWNpdHknKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gICQoJyNtZW51JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBzaG93V2luZG93KCcjbWVudVdpbmRvdycsICcjYmdPcGFjaXR5Jyk7XHJcbiAgfSk7XHJcblxyXG4gICQoJyNtZW51Q29udGVudCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIHN3aXRjaCAoJChlLnRhcmdldCkuYXR0cignaWQnKSkge1xyXG4gICAgICBjYXNlICdzdGFydE5ld0dhbWUnOlxyXG4gICAgICAgIGhpZGVXaW5kb3coJyNtZW51V2luZG93JywgJyNiZ09wYWNpdHknKTtcclxuICAgICAgICBnYW1lLnN0YXJ0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJmaW5pc2hHYW1lXCI6XHJcbiAgICAgICAgaGlkZVdpbmRvdygnI21lbnVXaW5kb3cnLCAnI2JnT3BhY2l0eScpO1xyXG4gICAgICAgIGdhbWUuZmluaXNoKCdwbGF5ZXInKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnY2xvc2VNZW51JzpcclxuICAgICAgICBoaWRlV2luZG93KCcjbWVudVdpbmRvdycsICcjYmdPcGFjaXR5Jyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKFwiI3Jlc3VsdHNDb250ZW50XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGlmICgkKGUudGFyZ2V0KS5hdHRyKCdpZCcpID09ICdzdGFydE5ld0dhbWUnKSB7XHJcbiAgICAgIGhpZGVXaW5kb3coJyNyZXN1bHRzV2luZG93JywgJyNiZ09wYWNpdHknKTtcclxuICAgICAgZ2FtZS5zdGFydCgpO1xyXG4gICAgfSBlbHNlIGlmICgkKGUudGFyZ2V0KS5hdHRyKCdpZCcpID09ICdleGl0Jykge1xyXG4gICAgICBsZXQgbXlXaW5kb3cgPSB3aW5kb3cub3BlbihcIlwiLCBcIl9zZWxmXCIpO1xyXG4gICAgICBteVdpbmRvdy5kb2N1bWVudC53cml0ZShcIlwiKTtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICBteVdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},1:function(c,n,r){r(0),c.exports=r(14)},14:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9nYW1lL3Njc3Mvc3R5bGUuc2Nzcz84Njc0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n")}});